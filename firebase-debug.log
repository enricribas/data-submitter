[debug] [2024-03-20T19:55:11.404Z] ----------------------------------------------------------------------
[debug] [2024-03-20T19:55:11.406Z] Command:       /home/enric/.asdf/installs/nodejs/21.4.0/bin/node /home/enric/.asdf/installs/nodejs/21.4.0/bin/firebase emulators:start --import=./firestore --export-on-exit
[debug] [2024-03-20T19:55:11.407Z] CLI Version:   13.5.2
[debug] [2024-03-20T19:55:11.407Z] Platform:      linux
[debug] [2024-03-20T19:55:11.407Z] Node Version:  v21.4.0
[debug] [2024-03-20T19:55:11.407Z] Time:          Wed Mar 20 2024 15:55:11 GMT-0400 (Eastern Daylight Time)
[debug] [2024-03-20T19:55:11.407Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-03-20T19:55:11.504Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-03-20T19:55:11.505Z] > authorizing via signed-in user (enric.ribas@botco.ai)
[debug] [2024-03-20T19:55:11.555Z] openjdk version "11.0.11" 2021-04-20
OpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)

[debug] [2024-03-20T19:55:11.555Z] OpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)

[debug] [2024-03-20T19:55:11.563Z] Parsed Java major version: 11
[info] i  emulators: Starting emulators: auth, functions, firestore, storage {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, storage"}}
[debug] [2024-03-20T19:55:11.566Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2024-03-20T19:55:11.571Z] [hub] writing locator at /tmp/hub-botco-dynamic-data.json
[debug] [2024-03-20T19:55:11.578Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: database, hosting, pubsub {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mdatabase, hosting, pubsub\u001b[22m"}}
[debug] [2024-03-20T19:55:11.581Z] defaultcredentials: writing to file /home/enric/.config/firebase/enric_ribas_botco.ai_application_default_credentials.json
[debug] [2024-03-20T19:55:11.582Z] Setting GAC to /home/enric/.config/firebase/enric_ribas_botco.ai_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /home/enric/.config/firebase/enric_ribas_botco.ai_application_default_credentials.json"}}
[debug] [2024-03-20T19:55:11.584Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/botco-dynamic-data/adminSdkConfig [none]
[debug] [2024-03-20T19:55:12.025Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/botco-dynamic-data/adminSdkConfig 200
[debug] [2024-03-20T19:55:12.026Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/botco-dynamic-data/adminSdkConfig {"projectId":"botco-dynamic-data","storageBucket":"botco-dynamic-data.appspot.com","locationId":"us-central"}
[info] i  firestore: Importing data from /home/enric/Personal/data-submitter/firestore/firestore_export/firestore_export.overall_export_metadata {"metadata":{"emulator":{"name":"firestore"},"message":"Importing data from /home/enric/Personal/data-submitter/firestore/firestore_export/firestore_export.overall_export_metadata"}}
[debug] [2024-03-20T19:55:12.047Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-03-20T19:55:12.047Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2024-03-20T19:55:12.048Z] Starting Firestore Emulator with command {"binary":"java","args":["-Djava.net.preferIPv4Stack=true","-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","/home/enric/.cache/firebase/emulators/cloud-firestore-emulator-v1.19.3.jar","--host","127.0.0.1","--port",8080,"--websocket_port",9150,"--project_id","botco-dynamic-data","--seed_from_export","/home/enric/Personal/data-submitter/firestore/firestore_export/firestore_export.overall_export_metadata","--rules","/home/enric/Personal/data-submitter/firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Djava.net.preferIPv4Stack=true\",\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"/home/enric/.cache/firebase/emulators/cloud-firestore-emulator-v1.19.3.jar\",\"--host\",\"127.0.0.1\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"botco-dynamic-data\",\"--seed_from_export\",\"/home/enric/Personal/data-submitter/firestore/firestore_export/firestore_export.overall_export_metadata\",\"--rules\",\"/home/enric/Personal/data-submitter/firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[debug] [2024-03-20T19:55:13.083Z] Mar 20, 2024 3:55:13 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start
INFO: Started WebSocket server on ws://127.0.0.1:9150
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 3:55:13 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start\nINFO: Started WebSocket server on ws://127.0.0.1:9150\n"}}
[debug] [2024-03-20T19:55:13.104Z] API endpoint: http://127.0.0.1:8080
 {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://127.0.0.1:8080\n"}}
[debug] [2024-03-20T19:55:13.104Z] If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=127.0.0.1:8080

If you are running a Firestore in Datastore Mode project, run:

   export DATASTORE_EMULATOR_HOST=127.0.0.1:8080

Note: Support for Datastore Mode is in preview. If you encounter any bugs please file at https://github.com/firebase/firebase-tools/issues.
Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\n\n   export FIRESTORE_EMULATOR_HOST=127.0.0.1:8080\n\nIf you are running a Firestore in Datastore Mode project, run:\n\n   export DATASTORE_EMULATOR_HOST=127.0.0.1:8080\n\nNote: Support for Datastore Mode is in preview. If you encounter any bugs please file at https://github.com/firebase/firebase-tools/issues.\nDev App Server is now running.\n\n"}}
[info] ✔  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[info] i  auth: Importing config from /home/enric/Personal/data-submitter/firestore/auth_export/config.json {"metadata":{"emulator":{"name":"auth"},"message":"Importing config from /home/enric/Personal/data-submitter/firestore/auth_export/config.json"}}
[info] i  auth: Importing accounts from /home/enric/Personal/data-submitter/firestore/auth_export/accounts.json {"metadata":{"emulator":{"name":"auth"},"message":"Importing accounts from /home/enric/Personal/data-submitter/firestore/auth_export/accounts.json"}}
[debug] [2024-03-20T19:55:19.820Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"storage"},"message":"Ignoring unsupported arg: port"}}
[debug] [2024-03-20T19:55:20.743Z] Temp file directory for storage emulator: /tmp/firebase/storage/blobs {"metadata":{"emulator":{"name":"storage"},"message":"Temp file directory for storage emulator: /tmp/firebase/storage/blobs"}}
[info] i  ui: downloading ui-v1.11.8.zip... {"metadata":{"emulator":{"name":"ui"},"message":"downloading ui-v1.11.8.zip..."}}
[debug] [2024-03-20T19:55:20.749Z] >>> [apiv2][query] GET https://storage.googleapis.com/firebase-preview-drop/emulator/ui-v1.11.8.zip 
[debug] [2024-03-20T19:55:20.899Z] <<< [apiv2][status] GET https://storage.googleapis.com/firebase-preview-drop/emulator/ui-v1.11.8.zip 200
[debug] [2024-03-20T19:55:20.899Z] <<< [apiv2][body] GET https://storage.googleapis.com/firebase-preview-drop/emulator/ui-v1.11.8.zip [stream]
[debug] [2024-03-20T19:55:21.087Z] Data is 3523907
[debug] [2024-03-20T19:55:21.087Z] [unzip] Entry: client/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2024-03-20T19:55:21.088Z] [unzip] Processing entry: client/
[debug] [2024-03-20T19:55:21.088Z] [unzip] mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/
[debug] [2024-03-20T19:55:21.089Z] [unzip] Entry: client/favicon.ico (compressed_size=2497 bytes, uncompressed_size=7406 bytes)
[debug] [2024-03-20T19:55:21.089Z] [unzip] Processing entry: client/favicon.ico
[debug] [2024-03-20T19:55:21.089Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.090Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/favicon.ico
[debug] [2024-03-20T19:55:21.095Z] [unzip] Entry: client/apple-touch-icon.png (compressed_size=7231 bytes, uncompressed_size=7367 bytes)
[debug] [2024-03-20T19:55:21.095Z] [unzip] Processing entry: client/apple-touch-icon.png
[debug] [2024-03-20T19:55:21.095Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.095Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/apple-touch-icon.png
[debug] [2024-03-20T19:55:21.096Z] [unzip] Entry: client/android-chrome-512x512.png (compressed_size=16987 bytes, uncompressed_size=18186 bytes)
[debug] [2024-03-20T19:55:21.097Z] [unzip] Processing entry: client/android-chrome-512x512.png
[debug] [2024-03-20T19:55:21.097Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.097Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/android-chrome-512x512.png
[debug] [2024-03-20T19:55:21.098Z] [unzip] Entry: client/assets/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2024-03-20T19:55:21.098Z] [unzip] Processing entry: client/assets/
[debug] [2024-03-20T19:55:21.098Z] [unzip] mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/
[debug] [2024-03-20T19:55:21.098Z] [unzip] Entry: client/assets/extensions/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2024-03-20T19:55:21.098Z] [unzip] Processing entry: client/assets/extensions/
[debug] [2024-03-20T19:55:21.098Z] [unzip] mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/extensions/
[debug] [2024-03-20T19:55:21.098Z] [unzip] Entry: client/assets/extensions/default-extension.png (compressed_size=1646 bytes, uncompressed_size=1657 bytes)
[debug] [2024-03-20T19:55:21.098Z] [unzip] Processing entry: client/assets/extensions/default-extension.png
[debug] [2024-03-20T19:55:21.098Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/extensions
[debug] [2024-03-20T19:55:21.098Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/extensions/default-extension.png
[debug] [2024-03-20T19:55:21.099Z] [unzip] Entry: client/assets/index-Z4-ilXvq.js.map (compressed_size=2229704 bytes, uncompressed_size=9599487 bytes)
[debug] [2024-03-20T19:55:21.099Z] [unzip] Processing entry: client/assets/index-Z4-ilXvq.js.map
[debug] [2024-03-20T19:55:21.100Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets
[debug] [2024-03-20T19:55:21.100Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/index-Z4-ilXvq.js.map
[debug] [2024-03-20T19:55:21.163Z] [unzip] Entry: client/assets/provider-icons/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2024-03-20T19:55:21.163Z] [unzip] Processing entry: client/assets/provider-icons/
[debug] [2024-03-20T19:55:21.163Z] [unzip] mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/
[debug] [2024-03-20T19:55:21.163Z] [unzip] Entry: client/assets/provider-icons/auth_service_oidc.svg (compressed_size=414 bytes, uncompressed_size=858 bytes)
[debug] [2024-03-20T19:55:21.163Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_oidc.svg
[debug] [2024-03-20T19:55:21.164Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.164Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_oidc.svg
[debug] [2024-03-20T19:55:21.165Z] [unzip] Entry: client/assets/provider-icons/auth_service_yahoo.svg (compressed_size=577 bytes, uncompressed_size=1182 bytes)
[debug] [2024-03-20T19:55:21.165Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_yahoo.svg
[debug] [2024-03-20T19:55:21.166Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.166Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_yahoo.svg
[debug] [2024-03-20T19:55:21.167Z] [unzip] Entry: client/assets/provider-icons/auth_service_phone.svg (compressed_size=261 bytes, uncompressed_size=414 bytes)
[debug] [2024-03-20T19:55:21.167Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_phone.svg
[debug] [2024-03-20T19:55:21.167Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.167Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_phone.svg
[debug] [2024-03-20T19:55:21.168Z] [unzip] Entry: client/assets/provider-icons/auth_service_saml.svg (compressed_size=575 bytes, uncompressed_size=1226 bytes)
[debug] [2024-03-20T19:55:21.168Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_saml.svg
[debug] [2024-03-20T19:55:21.168Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.169Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_saml.svg
[debug] [2024-03-20T19:55:21.170Z] [unzip] Entry: client/assets/provider-icons/auth_service_mslive.svg (compressed_size=203 bytes, uncompressed_size=378 bytes)
[debug] [2024-03-20T19:55:21.170Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_mslive.svg
[debug] [2024-03-20T19:55:21.170Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.170Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_mslive.svg
[debug] [2024-03-20T19:55:21.171Z] [unzip] Entry: client/assets/provider-icons/auth_service_facebook.svg (compressed_size=289 bytes, uncompressed_size=457 bytes)
[debug] [2024-03-20T19:55:21.171Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_facebook.svg
[debug] [2024-03-20T19:55:21.172Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.172Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_facebook.svg
[debug] [2024-03-20T19:55:21.173Z] [unzip] Entry: client/assets/provider-icons/auth_service_play_games.svg (compressed_size=565 bytes, uncompressed_size=1173 bytes)
[debug] [2024-03-20T19:55:21.173Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_play_games.svg
[debug] [2024-03-20T19:55:21.173Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.173Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_play_games.svg
[debug] [2024-03-20T19:55:21.174Z] [unzip] Entry: client/assets/provider-icons/auth_service_github.svg (compressed_size=466 bytes, uncompressed_size=838 bytes)
[debug] [2024-03-20T19:55:21.174Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_github.svg
[debug] [2024-03-20T19:55:21.174Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.174Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_github.svg
[debug] [2024-03-20T19:55:21.175Z] [unzip] Entry: client/assets/provider-icons/auth_service_apple.svg (compressed_size=230 bytes, uncompressed_size=334 bytes)
[debug] [2024-03-20T19:55:21.175Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_apple.svg
[debug] [2024-03-20T19:55:21.176Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.176Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_apple.svg
[debug] [2024-03-20T19:55:21.177Z] [unzip] Entry: client/assets/provider-icons/auth_service_google.svg (compressed_size=409 bytes, uncompressed_size=720 bytes)
[debug] [2024-03-20T19:55:21.177Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_google.svg
[debug] [2024-03-20T19:55:21.177Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.177Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_google.svg
[debug] [2024-03-20T19:55:21.178Z] [unzip] Entry: client/assets/provider-icons/auth_service_email.svg (compressed_size=228 bytes, uncompressed_size=326 bytes)
[debug] [2024-03-20T19:55:21.178Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_email.svg
[debug] [2024-03-20T19:55:21.178Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.178Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_email.svg
[debug] [2024-03-20T19:55:21.179Z] [unzip] Entry: client/assets/provider-icons/auth_service_twitter.svg (compressed_size=444 bytes, uncompressed_size=751 bytes)
[debug] [2024-03-20T19:55:21.179Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_twitter.svg
[debug] [2024-03-20T19:55:21.179Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.180Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_twitter.svg
[debug] [2024-03-20T19:55:21.185Z] [unzip] Entry: client/assets/provider-icons/auth_service_game_center.svg (compressed_size=991 bytes, uncompressed_size=3921 bytes)
[debug] [2024-03-20T19:55:21.186Z] [unzip] Processing entry: client/assets/provider-icons/auth_service_game_center.svg
[debug] [2024-03-20T19:55:21.186Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons
[debug] [2024-03-20T19:55:21.186Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/provider-icons/auth_service_game_center.svg
[debug] [2024-03-20T19:55:21.188Z] [unzip] Entry: client/assets/img/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2024-03-20T19:55:21.188Z] [unzip] Processing entry: client/assets/img/
[debug] [2024-03-20T19:55:21.188Z] [unzip] mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/img/
[debug] [2024-03-20T19:55:21.188Z] [unzip] Entry: client/assets/img/database.png (compressed_size=29449 bytes, uncompressed_size=29988 bytes)
[debug] [2024-03-20T19:55:21.188Z] [unzip] Processing entry: client/assets/img/database.png
[debug] [2024-03-20T19:55:21.188Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/img
[debug] [2024-03-20T19:55:21.189Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/img/database.png
[debug] [2024-03-20T19:55:21.190Z] [unzip] Entry: client/assets/index-Cj5I7867.css (compressed_size=35786 bytes, uncompressed_size=297937 bytes)
[debug] [2024-03-20T19:55:21.190Z] [unzip] Processing entry: client/assets/index-Cj5I7867.css
[debug] [2024-03-20T19:55:21.190Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets
[debug] [2024-03-20T19:55:21.190Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/index-Cj5I7867.css
[debug] [2024-03-20T19:55:21.194Z] [unzip] Entry: client/assets/index-Z4-ilXvq.js (compressed_size=563876 bytes, uncompressed_size=2021818 bytes)
[debug] [2024-03-20T19:55:21.194Z] [unzip] Processing entry: client/assets/index-Z4-ilXvq.js
[debug] [2024-03-20T19:55:21.194Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets
[debug] [2024-03-20T19:55:21.194Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/assets/index-Z4-ilXvq.js
[debug] [2024-03-20T19:55:21.212Z] [unzip] Entry: client/safari-pinned-tab.svg (compressed_size=838 bytes, uncompressed_size=1504 bytes)
[debug] [2024-03-20T19:55:21.213Z] [unzip] Processing entry: client/safari-pinned-tab.svg
[debug] [2024-03-20T19:55:21.213Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.213Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/safari-pinned-tab.svg
[debug] [2024-03-20T19:55:21.214Z] [unzip] Entry: client/mstile-150x150.png (compressed_size=5406 bytes, uncompressed_size=5723 bytes)
[debug] [2024-03-20T19:55:21.214Z] [unzip] Processing entry: client/mstile-150x150.png
[debug] [2024-03-20T19:55:21.214Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.215Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/mstile-150x150.png
[debug] [2024-03-20T19:55:21.215Z] [unzip] Entry: client/browserconfig.xml (compressed_size=491 bytes, uncompressed_size=822 bytes)
[debug] [2024-03-20T19:55:21.215Z] [unzip] Processing entry: client/browserconfig.xml
[debug] [2024-03-20T19:55:21.215Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.216Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/browserconfig.xml
[debug] [2024-03-20T19:55:21.217Z] [unzip] Entry: client/robots.txt (compressed_size=26 bytes, uncompressed_size=26 bytes)
[debug] [2024-03-20T19:55:21.217Z] [unzip] Processing entry: client/robots.txt
[debug] [2024-03-20T19:55:21.217Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.217Z] [unzip] Writing file: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/robots.txt
[debug] [2024-03-20T19:55:21.218Z] [unzip] Entry: client/index.html (compressed_size=1365 bytes, uncompressed_size=3071 bytes)
[debug] [2024-03-20T19:55:21.218Z] [unzip] Processing entry: client/index.html
[debug] [2024-03-20T19:55:21.218Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.218Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/index.html
[debug] [2024-03-20T19:55:21.219Z] [unzip] Entry: client/favicon-16x16.png (compressed_size=757 bytes, uncompressed_size=777 bytes)
[debug] [2024-03-20T19:55:21.219Z] [unzip] Processing entry: client/favicon-16x16.png
[debug] [2024-03-20T19:55:21.219Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.219Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/favicon-16x16.png
[debug] [2024-03-20T19:55:21.220Z] [unzip] Entry: client/manifest.json (compressed_size=246 bytes, uncompressed_size=551 bytes)
[debug] [2024-03-20T19:55:21.220Z] [unzip] Processing entry: client/manifest.json
[debug] [2024-03-20T19:55:21.220Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.220Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/manifest.json
[debug] [2024-03-20T19:55:21.221Z] [unzip] Entry: client/favicon-32x32.png (compressed_size=1175 bytes, uncompressed_size=1175 bytes)
[debug] [2024-03-20T19:55:21.221Z] [unzip] Processing entry: client/favicon-32x32.png
[debug] [2024-03-20T19:55:21.221Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.221Z] [unzip] Writing file: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/favicon-32x32.png
[debug] [2024-03-20T19:55:21.222Z] [unzip] Entry: client/android-chrome-192x192.png (compressed_size=7602 bytes, uncompressed_size=7834 bytes)
[debug] [2024-03-20T19:55:21.222Z] [unzip] Processing entry: client/android-chrome-192x192.png
[debug] [2024-03-20T19:55:21.222Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client
[debug] [2024-03-20T19:55:21.222Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/client/android-chrome-192x192.png
[debug] [2024-03-20T19:55:21.223Z] [unzip] Entry: server/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2024-03-20T19:55:21.223Z] [unzip] Processing entry: server/
[debug] [2024-03-20T19:55:21.223Z] [unzip] mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server/
[debug] [2024-03-20T19:55:21.223Z] [unzip] Entry: server/server.mjs (compressed_size=311497 bytes, uncompressed_size=1147307 bytes)
[debug] [2024-03-20T19:55:21.223Z] [unzip] Processing entry: server/server.mjs
[debug] [2024-03-20T19:55:21.223Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server
[debug] [2024-03-20T19:55:21.223Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server/server.mjs
[debug] [2024-03-20T19:55:21.232Z] [unzip] Entry: server/assets/ (compressed_size=0 bytes, uncompressed_size=0 bytes)
[debug] [2024-03-20T19:55:21.232Z] [unzip] Processing entry: server/assets/
[debug] [2024-03-20T19:55:21.232Z] [unzip] mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server/assets/
[debug] [2024-03-20T19:55:21.232Z] [unzip] Entry: server/assets/multipart-parser-n20ATYm_.mjs.map (compressed_size=4790 bytes, uncompressed_size=17920 bytes)
[debug] [2024-03-20T19:55:21.232Z] [unzip] Processing entry: server/assets/multipart-parser-n20ATYm_.mjs.map
[debug] [2024-03-20T19:55:21.232Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server/assets
[debug] [2024-03-20T19:55:21.233Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server/assets/multipart-parser-n20ATYm_.mjs.map
[debug] [2024-03-20T19:55:21.234Z] [unzip] Entry: server/assets/multipart-parser-n20ATYm_.mjs (compressed_size=2625 bytes, uncompressed_size=10428 bytes)
[debug] [2024-03-20T19:55:21.234Z] [unzip] Processing entry: server/assets/multipart-parser-n20ATYm_.mjs
[debug] [2024-03-20T19:55:21.234Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server/assets
[debug] [2024-03-20T19:55:21.234Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server/assets/multipart-parser-n20ATYm_.mjs
[debug] [2024-03-20T19:55:21.234Z] [unzip] Entry: server/server.mjs.map (compressed_size=286219 bytes, uncompressed_size=1310517 bytes)
[debug] [2024-03-20T19:55:21.235Z] [unzip] Processing entry: server/server.mjs.map
[debug] [2024-03-20T19:55:21.235Z] [unzip] else mkdir: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server
[debug] [2024-03-20T19:55:21.235Z] [unzip] deflating: /home/enric/.cache/firebase/emulators/ui-v1.11.8/server/server.mjs.map
[info] i  ui: Removing outdated emulator files: ui-v1.11.7 {"metadata":{"emulator":{"name":"ui"},"message":"Removing outdated emulator files: ui-v1.11.7"}}
[info] i  ui: Removing outdated emulator files: ui-v1.11.7.zip {"metadata":{"emulator":{"name":"ui"},"message":"Removing outdated emulator files: ui-v1.11.7.zip"}}
[debug] [2024-03-20T19:55:21.248Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-03-20T19:55:21.248Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2024-03-20T19:55:21.248Z] Starting Emulator UI with command {"binary":"node","args":["/home/enric/.cache/firebase/emulators/ui-v1.11.8/server/server.mjs"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/home/enric/.cache/firebase/emulators/ui-v1.11.8/server/server.mjs\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2024-03-20T19:55:21.350Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[info] i  functions: Watching "/home/enric/Personal/data-submitter/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/home/enric/Personal/data-submitter/functions\" for Cloud Functions..."}}
[debug] [2024-03-20T19:55:21.509Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T19:55:22.133Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T19:55:22.133Z] Building nodejs source
[debug] [2024-03-20T19:55:22.134Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T19:55:22.137Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T19:55:22.139Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8724

[debug] [2024-03-20T19:55:22.449Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs."}}
[info] ✔  functions[us-central1-test]: http function initialized (http://127.0.0.1:5001/botco-dynamic-data/us-central1/test). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/botco-dynamic-data/us-central1/test)."}}
[info] ✔  functions[us-central1-postData]: http function initialized (http://127.0.0.1:5001/botco-dynamic-data/us-central1/postData). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/botco-dynamic-data/us-central1/postData)."}}
[debug] [2024-03-20T19:55:27.464Z] addFirestoreTrigger "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2024-03-20T19:55:27.464Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-requestReceived-0 [none]
[debug] [2024-03-20T19:55:27.464Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-requestReceived-0 "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2024-03-20T19:55:27.472Z] Mar 20, 2024 3:55:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 3:55:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T19:55:27.638Z] Mar 20, 2024 3:55:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 3:55:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2024-03-20T19:55:28.103Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-requestReceived-0 200
[debug] [2024-03-20T19:55:28.103Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-requestReceived-0 {}
[info] ✔  functions[us-central1-requestReceived]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2024-03-20T19:55:28.103Z] addFirestoreTrigger "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2024-03-20T19:55:28.103Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-createContact-0 [none]
[debug] [2024-03-20T19:55:28.104Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-createContact-0 "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2024-03-20T19:55:28.115Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-createContact-0 200
[debug] [2024-03-20T19:55:28.115Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-createContact-0 {}
[info] ✔  functions[us-central1-createContact]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2024-03-20T19:55:28.116Z] addFirestoreTrigger "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2024-03-20T19:55:28.116Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-processJSON-0 [none]
[debug] [2024-03-20T19:55:28.116Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-processJSON-0 "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2024-03-20T19:55:28.130Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-processJSON-0 200
[debug] [2024-03-20T19:55:28.131Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-processJSON-0 {}
[info] ✔  functions[us-central1-processJSON]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2024-03-20T19:55:28.131Z] addFirestoreTrigger "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2024-03-20T19:55:28.131Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-sendOutputs-0 [none]
[debug] [2024-03-20T19:55:28.132Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-sendOutputs-0 "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2024-03-20T19:55:28.144Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-sendOutputs-0 200
[debug] [2024-03-20T19:55:28.144Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/botco-dynamic-data/triggers/us-central1-sendOutputs-0 {}
[info] ✔  functions[us-central1-sendOutputs]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬─────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Authentication │ 127.0.0.1:9099 │ http://127.0.0.1:4000/auth      │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Firestore      │ 127.0.0.1:8080 │ http://127.0.0.1:4000/firestore │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Storage        │ 127.0.0.1:9199 │ http://127.0.0.1:4000/storage   │
└────────────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2024-03-20T19:55:32.145Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/botco-dynamic-data/adminSdkConfig [none]
[debug] [2024-03-20T19:55:32.170Z] Mar 20, 2024 3:55:32 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 3:55:32 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2024-03-20T19:55:32.419Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/botco-dynamic-data/adminSdkConfig 200
[debug] [2024-03-20T19:55:32.420Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/botco-dynamic-data/adminSdkConfig {"projectId":"botco-dynamic-data","storageBucket":"botco-dynamic-data.appspot.com","locationId":"us-central"}
[debug] [2024-03-20T19:55:32.614Z] Mar 20, 2024 3:55:32 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 3:55:32 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2024-03-20T19:55:32.688Z] Mar 20, 2024 3:55:32 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 3:55:32 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2024-03-20T19:56:04.633Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T19:56:04.633Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710964564632","timestamp":"2024-03-20T19:56:04.632Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964564629","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T19:56:04.629Z","updated":"2024-03-20T19:56:04.629Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"BL/Ycp5I6xFqW/S/YptNdLFjUDk","metadata":{"firebaseStorageDownloadTokens":"5343ebf3-0bc8-4a2e-8201-d0010b6e408f"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T19:56:04.629Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964564629","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964564629&alt=media"}}
[debug] [2024-03-20T19:56:04.638Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T19:56:04.638Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T19:56:04.638Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T19:56:04.638Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"2a54af6c-a82b-4153-b29c-cdfeeeed4ccd","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","time":"2024-03-20T19:56:04.629Z","data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964564629","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T19:56:04.629Z","updated":"2024-03-20T19:56:04.629Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"BL/Ycp5I6xFqW/S/YptNdLFjUDk","metadata":{"firebaseStorageDownloadTokens":"5343ebf3-0bc8-4a2e-8201-d0010b6e408f"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T19:56:04.629Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964564629","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964564629&alt=media"}}
[debug] [2024-03-20T19:56:04.643Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T19:56:04.644Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T19:59:06.828Z] File /home/enric/Personal/data-submitter/functions/src/index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/index.ts changed, reloading triggers"}}
[debug] [2024-03-20T19:59:07.831Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T19:59:08.524Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T19:59:08.524Z] Building nodejs source
[debug] [2024-03-20T19:59:08.524Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T19:59:08.526Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T19:59:08.527Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8647

[debug] [2024-03-20T19:59:08.825Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs."}}
[debug] [2024-03-20T19:59:39.541Z] File /home/enric/Personal/data-submitter/functions/src/index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/index.ts changed, reloading triggers"}}
[debug] [2024-03-20T19:59:40.542Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T19:59:41.412Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T19:59:41.412Z] Building nodejs source
[debug] [2024-03-20T19:59:41.412Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T19:59:41.414Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T19:59:41.415Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8573

[debug] [2024-03-20T19:59:41.732Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs."}}
[debug] [2024-03-20T20:00:16.539Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.539Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.556Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.556Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.568Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.569Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.577Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.577Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.580Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.580Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.585Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.585Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.588Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.588Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.592Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.592Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.595Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.595Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.597Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.597Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.601Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.602Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.605Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.605Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.607Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.607Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.609Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.609Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.612Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.612Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.622Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:00:16.622Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:00:17.622Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:00:18.355Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:00:18.355Z] Building nodejs source
[debug] [2024-03-20T20:00:18.355Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:00:18.358Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:00:18.358Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8796

[error] (node:10088) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:00:18.916Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:00:23.927Z] addStorageTrigger {"eventTrigger":{"eventType":"google.storage.object.finalize","resource":"projects/_/buckets/botco-dynamic-data.appspot.com"}}
[info] ✔  functions[us-central1-fileUpload]: storage function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mstorage\u001b[22m function initialized."}}
[debug] [2024-03-20T20:01:28.043Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:01:29.047Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:01:29.719Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:01:29.719Z] Building nodejs source
[debug] [2024-03-20T20:01:29.719Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:01:29.720Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:01:29.721Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8189

[error] (node:10412) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:01:30.092Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:01:44.236Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.236Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.246Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.246Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.255Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.256Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.262Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.262Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.264Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.264Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.266Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.267Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.271Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.271Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.278Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.279Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.282Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.283Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.283Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.283Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.287Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.287Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.290Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.291Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.292Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.292Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.294Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.295Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.297Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.298Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.300Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.301Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.305Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:01:44.305Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:01:45.306Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:01:46.006Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:01:46.006Z] Building nodejs source
[debug] [2024-03-20T20:01:46.006Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:01:46.007Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:01:46.008Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8428

[error] (node:10959) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:01:46.443Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:02:00.527Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:02:00.528Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710964920527","timestamp":"2024-03-20T20:02:00.527Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964920525","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:02:00.526Z","updated":"2024-03-20T20:02:00.526Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"kLwzBrmP4bgGWVLNI37XHS0Yumw","metadata":{"firebaseStorageDownloadTokens":"00da3d10-2769-45ba-8866-9f24377c54b3"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:00.526Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964920525","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964920525&alt=media"}}
[debug] [2024-03-20T20:02:00.531Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:02:00.531Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:02:00.532Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:02:00.531Z"],"workRunningCount":1}
[debug] [2024-03-20T20:02:00.533Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:02:00.534Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:02:00.534Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:02:00.534Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:02:00.534Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"9d356eef-4aac-4836-9f42-cb939aa63682","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","time":"2024-03-20T20:02:00.526Z","data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964920525","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:02:00.526Z","updated":"2024-03-20T20:02:00.526Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"kLwzBrmP4bgGWVLNI37XHS0Yumw","metadata":{"firebaseStorageDownloadTokens":"00da3d10-2769-45ba-8866-9f24377c54b3"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:00.526Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964920525","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964920525&alt=media"}}
[debug] [2024-03-20T20:02:00.538Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:02:00.538Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:02:00.538Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:02:00.538Z"],"workRunningCount":1}
[debug] [2024-03-20T20:02:00.539Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:02:00.542Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:02:00.544Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:02:00.558Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:02:00.560Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:02:00.565Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:02:00.565Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:11096) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:11096) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:11096) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:02:01.155Z] [runtime-status] [11096] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:02:01.160Z] [runtime-status] [11096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:02:01.160Z] [runtime-status] [11096] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:02:01.161Z] [runtime-status] [11096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:02:01.295Z] [runtime-status] [11096] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:02:01.295Z] [runtime-status] [11096] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:02:01.296Z] [runtime-status] [11096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:02:01.296Z] [runtime-status] [11096] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:02:01.297Z] [runtime-status] [11096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:02:01.297Z] [runtime-status] [11096] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:02:01.299Z] [runtime-status] [11096] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:02:01.422Z] [runtime-status] [11096] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:02:01.422Z] [runtime-status] [11096] Listening to port: /tmp/fire_emu_3de7081ed872a7e6.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] Listening to port: /tmp/fire_emu_3de7081ed872a7e6.sock"}}
[debug] [2024-03-20T20:02:01.491Z] [worker-us-central1-fileUpload-1ee5c72a-183a-4042-89f5-06b2251ec1a9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-1ee5c72a-183a-4042-89f5-06b2251ec1a9]: IDLE"}}
[debug] [2024-03-20T20:02:01.492Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:02:01.494Z] [worker-us-central1-fileUpload-1ee5c72a-183a-4042-89f5-06b2251ec1a9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-1ee5c72a-183a-4042-89f5-06b2251ec1a9]: BUSY"}}
[debug] [2024-03-20T20:02:01.515Z] [runtime-status] [11096] RunBackground {"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964920525","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:02:00.526Z","updated":"2024-03-20T20:02:00.526Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"kLwzBrmP4bgGWVLNI37XHS0Yumw","metadata":{"firebaseStorageDownloadTokens":"00da3d10-2769-45ba-8866-9f24377c54b3"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:00.526Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964920525","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964920525&alt=media"},"context":{"eventId":"1710964920527","timestamp":"2024-03-20T20:02:00.527Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11096] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"data.csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710964920525\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:02:00.526Z\",\"updated\":\"2024-03-20T20:02:00.526Z\",\"storageClass\":\"STANDARD\",\"size\":\"18\",\"md5Hash\":\"t7iGCK/zdm3D8v+4kGRCuw==\",\"etag\":\"kLwzBrmP4bgGWVLNI37XHS0Yumw\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"00da3d10-2769-45ba-8866-9f24377c54b3\"},\"crc32c\":\"FwJfIA==\",\"timeStorageClassUpdated\":\"2024-03-20T20:02:00.526Z\",\"id\":\"botco-dynamic-data.appspot.com/data.csv/1710964920525\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964920525&alt=media\"},\"context\":{\"eventId\":\"1710964920527\",\"timestamp\":\"2024-03-20T20:02:00.527Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv\",\"type\":\"storage#object\"}}}"}}
[warn] ⚠  functions: TypeError: Cannot read properties of undefined (reading 'bucket')
    at createContactsFromCSV (/home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js:7:35)
    at cloudFunction (/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:149:13)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"TypeError: Cannot read properties of undefined (reading 'bucket')\n    at createContactsFromCSV (/home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js:7:35)\n    at cloudFunction (/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:149:13)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2024-03-20T20:02:01.523Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:02:01.524Z] [worker-us-central1-fileUpload-1ee5c72a-183a-4042-89f5-06b2251ec1a9]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-1ee5c72a-183a-4042-89f5-06b2251ec1a9]: exited"}}
[debug] [2024-03-20T20:02:01.524Z] [worker-us-central1-fileUpload-1ee5c72a-183a-4042-89f5-06b2251ec1a9]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-1ee5c72a-183a-4042-89f5-06b2251ec1a9]: FINISHED"}}
[debug] [2024-03-20T20:02:06.413Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:02:06.414Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710964926413","timestamp":"2024-03-20T20:02:06.413Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964920525","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:02:00.526Z","updated":"2024-03-20T20:02:00.526Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"kLwzBrmP4bgGWVLNI37XHS0Yumw","metadata":{"firebaseStorageDownloadTokens":"00da3d10-2769-45ba-8866-9f24377c54b3"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:00.526Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964920525","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964920525&alt=media"}}
[debug] [2024-03-20T20:02:06.416Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:02:06.416Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:02:06.416Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:02:06.416Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"f8b75901-cc8b-4026-98df-6fb6a1c0670c","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","time":"2024-03-20T20:02:00.526Z","data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964920525","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:02:00.526Z","updated":"2024-03-20T20:02:00.526Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"kLwzBrmP4bgGWVLNI37XHS0Yumw","metadata":{"firebaseStorageDownloadTokens":"00da3d10-2769-45ba-8866-9f24377c54b3"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:00.526Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964920525","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964920525&alt=media"}}
[debug] [2024-03-20T20:02:06.417Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:02:06.418Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:02:09.787Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:02:09.789Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710964929786","timestamp":"2024-03-20T20:02:09.786Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964929785","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:02:09.786Z","updated":"2024-03-20T20:02:09.786Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"nRa3cCHG1mI6b7jbcqvBoGZmxPw","metadata":{"firebaseStorageDownloadTokens":"d4bca271-bee3-4af6-9fac-d9319fac01e6"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:09.786Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964929785","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964929785&alt=media"}}
[debug] [2024-03-20T20:02:09.792Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:02:09.792Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:02:09.793Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:02:09.792Z"],"workRunningCount":1}
[debug] [2024-03-20T20:02:09.794Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:02:09.797Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:02:09.797Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:02:09.797Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:02:09.798Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"7be1b31b-a0c9-468d-87db-6927eaa1e1f6","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","time":"2024-03-20T20:02:09.786Z","data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964929785","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:02:09.786Z","updated":"2024-03-20T20:02:09.786Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"nRa3cCHG1mI6b7jbcqvBoGZmxPw","metadata":{"firebaseStorageDownloadTokens":"d4bca271-bee3-4af6-9fac-d9319fac01e6"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:09.786Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964929785","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964929785&alt=media"}}
[debug] [2024-03-20T20:02:09.802Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:02:09.802Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:02:09.803Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:02:09.802Z"],"workRunningCount":1}
[debug] [2024-03-20T20:02:09.803Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:02:09.817Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:02:09.818Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[debug] [2024-03-20T20:02:09.819Z] [worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:02:09.861Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:02:09.861Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:02:09.865Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:02:09.865Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:11176) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:11176) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:11176) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:02:10.481Z] [runtime-status] [11176] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:02:10.481Z] [runtime-status] [11176] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:02:10.482Z] [runtime-status] [11176] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:02:10.482Z] [runtime-status] [11176] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:02:10.599Z] [runtime-status] [11176] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:02:10.599Z] [runtime-status] [11176] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:02:10.599Z] [runtime-status] [11176] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:02:10.600Z] [runtime-status] [11176] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:02:10.601Z] [runtime-status] [11176] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:02:10.601Z] [runtime-status] [11176] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:02:10.603Z] [runtime-status] [11176] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:02:10.754Z] [runtime-status] [11176] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:02:10.755Z] [runtime-status] [11176] Listening to port: /tmp/fire_emu_ba8489cc6a976e17.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] Listening to port: /tmp/fire_emu_ba8489cc6a976e17.sock"}}
[debug] [2024-03-20T20:02:10.770Z] [worker-us-central1-fileUpload-bb995f35-c496-4a9f-8a36-7142c329c092]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-bb995f35-c496-4a9f-8a36-7142c329c092]: IDLE"}}
[debug] [2024-03-20T20:02:10.771Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:02:10.771Z] [worker-us-central1-fileUpload-bb995f35-c496-4a9f-8a36-7142c329c092]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-bb995f35-c496-4a9f-8a36-7142c329c092]: BUSY"}}
[debug] [2024-03-20T20:02:10.778Z] [runtime-status] [11176] RunBackground {"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964929785","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:02:09.786Z","updated":"2024-03-20T20:02:09.786Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"nRa3cCHG1mI6b7jbcqvBoGZmxPw","metadata":{"firebaseStorageDownloadTokens":"d4bca271-bee3-4af6-9fac-d9319fac01e6"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:09.786Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964929785","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964929785&alt=media"},"context":{"eventId":"1710964929786","timestamp":"2024-03-20T20:02:09.786Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11176] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"data.csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710964929785\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:02:09.786Z\",\"updated\":\"2024-03-20T20:02:09.786Z\",\"storageClass\":\"STANDARD\",\"size\":\"18\",\"md5Hash\":\"t7iGCK/zdm3D8v+4kGRCuw==\",\"etag\":\"nRa3cCHG1mI6b7jbcqvBoGZmxPw\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"d4bca271-bee3-4af6-9fac-d9319fac01e6\"},\"crc32c\":\"FwJfIA==\",\"timeStorageClassUpdated\":\"2024-03-20T20:02:09.786Z\",\"id\":\"botco-dynamic-data.appspot.com/data.csv/1710964929785\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964929785&alt=media\"},\"context\":{\"eventId\":\"1710964929786\",\"timestamp\":\"2024-03-20T20:02:09.786Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv\",\"type\":\"storage#object\"}}}"}}
[warn] ⚠  functions: TypeError: Cannot read properties of undefined (reading 'bucket')
    at createContactsFromCSV (/home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js:7:35)
    at cloudFunction (/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:149:13)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"TypeError: Cannot read properties of undefined (reading 'bucket')\n    at createContactsFromCSV (/home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js:7:35)\n    at cloudFunction (/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:149:13)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2024-03-20T20:02:10.784Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:02:10.784Z] [worker-us-central1-fileUpload-bb995f35-c496-4a9f-8a36-7142c329c092]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-bb995f35-c496-4a9f-8a36-7142c329c092]: exited"}}
[debug] [2024-03-20T20:02:10.784Z] [worker-us-central1-fileUpload-bb995f35-c496-4a9f-8a36-7142c329c092]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-bb995f35-c496-4a9f-8a36-7142c329c092]: FINISHED"}}
[debug] [2024-03-20T20:02:46.213Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:02:47.214Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:02:47.886Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:02:47.886Z] Building nodejs source
[debug] [2024-03-20T20:02:47.886Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:02:47.887Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:02:47.887Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8916

[error] (node:11348) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:02:48.291Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:02:54.721Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.721Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.732Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.733Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.743Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.744Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.751Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.751Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.753Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.753Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.756Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.756Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.758Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.759Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.764Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.764Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.766Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.767Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.767Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.767Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.769Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.770Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.773Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.773Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.781Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.781Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.784Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.784Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.786Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.786Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.788Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.789Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.793Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:02:54.793Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:02:55.795Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:02:56.467Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:02:56.467Z] Building nodejs source
[debug] [2024-03-20T20:02:56.467Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:02:56.469Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:02:56.470Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8490

[error] (node:11839) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:02:56.865Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:03:00.137Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:03:00.138Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710964980137","timestamp":"2024-03-20T20:03:00.137Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964929785","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:02:09.786Z","updated":"2024-03-20T20:02:09.786Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"nRa3cCHG1mI6b7jbcqvBoGZmxPw","metadata":{"firebaseStorageDownloadTokens":"d4bca271-bee3-4af6-9fac-d9319fac01e6"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:09.786Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964929785","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964929785&alt=media"}}
[debug] [2024-03-20T20:03:00.141Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:03:00.142Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:03:00.142Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:03:00.142Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"2c491325-016f-4b5c-ae7d-7f8056a13f0c","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","time":"2024-03-20T20:02:09.786Z","data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964929785","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:02:09.786Z","updated":"2024-03-20T20:02:09.786Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"nRa3cCHG1mI6b7jbcqvBoGZmxPw","metadata":{"firebaseStorageDownloadTokens":"d4bca271-bee3-4af6-9fac-d9319fac01e6"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:02:09.786Z","id":"botco-dynamic-data.appspot.com/data.csv/1710964929785","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710964929785&alt=media"}}
[debug] [2024-03-20T20:03:00.144Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:03:00.145Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:03:05.118Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:03:05.119Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710964985117","timestamp":"2024-03-20T20:03:05.117Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964985116","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:03:05.116Z","updated":"2024-03-20T20:03:05.116Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"BGpjPciesf1wGJkJR0uUBvnQyNU","metadata":{"firebaseStorageDownloadTokens":"1600720a-3b9e-428b-8ec4-1ed7aaa78d34"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:03:05.116Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710964985116","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710964985116&alt=media"}}
[debug] [2024-03-20T20:03:05.125Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:03:05.124Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:03:05.127Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:03:05.124Z"],"workRunningCount":1}
[debug] [2024-03-20T20:03:05.128Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:03:05.135Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:03:05.136Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:03:05.136Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:03:05.136Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"100ac15d-2b1c-4aa4-b3f6-0815df3dc14a","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","time":"2024-03-20T20:03:05.116Z","data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964985116","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:03:05.116Z","updated":"2024-03-20T20:03:05.116Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"BGpjPciesf1wGJkJR0uUBvnQyNU","metadata":{"firebaseStorageDownloadTokens":"1600720a-3b9e-428b-8ec4-1ed7aaa78d34"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:03:05.116Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710964985116","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710964985116&alt=media"}}
[debug] [2024-03-20T20:03:05.144Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:03:05.144Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:03:05.145Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:03:05.144Z"],"workRunningCount":1}
[debug] [2024-03-20T20:03:05.146Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:03:05.156Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:03:05.157Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[debug] [2024-03-20T20:03:05.157Z] [worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:03:05.174Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:03:05.175Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:03:05.186Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:03:05.186Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:11934) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:11934) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:11934) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:03:05.755Z] [runtime-status] [11934] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:03:05.755Z] [runtime-status] [11934] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:03:05.756Z] [runtime-status] [11934] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:03:05.756Z] [runtime-status] [11934] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:03:05.889Z] [runtime-status] [11934] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:03:05.890Z] [runtime-status] [11934] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:03:05.890Z] [runtime-status] [11934] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:03:05.891Z] [runtime-status] [11934] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:03:05.892Z] [runtime-status] [11934] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:03:05.892Z] [runtime-status] [11934] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:03:05.898Z] [runtime-status] [11934] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:03:06.034Z] [runtime-status] [11934] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:03:06.035Z] [runtime-status] [11934] Listening to port: /tmp/fire_emu_3b6b4a0ba898a958.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] Listening to port: /tmp/fire_emu_3b6b4a0ba898a958.sock"}}
[debug] [2024-03-20T20:03:06.093Z] [worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: IDLE"}}
[debug] [2024-03-20T20:03:06.094Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:03:06.094Z] [worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: BUSY"}}
[debug] [2024-03-20T20:03:06.106Z] [runtime-status] [11934] RunBackground {"data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964985116","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:03:05.116Z","updated":"2024-03-20T20:03:05.116Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"BGpjPciesf1wGJkJR0uUBvnQyNU","metadata":{"firebaseStorageDownloadTokens":"1600720a-3b9e-428b-8ec4-1ed7aaa78d34"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:03:05.116Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710964985116","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710964985116&alt=media"},"context":{"eventId":"1710964985117","timestamp":"2024-03-20T20:03:05.117Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [11934] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"data (1).csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710964985116\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:03:05.116Z\",\"updated\":\"2024-03-20T20:03:05.116Z\",\"storageClass\":\"STANDARD\",\"size\":\"18\",\"md5Hash\":\"t7iGCK/zdm3D8v+4kGRCuw==\",\"etag\":\"BGpjPciesf1wGJkJR0uUBvnQyNU\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"1600720a-3b9e-428b-8ec4-1ed7aaa78d34\"},\"crc32c\":\"FwJfIA==\",\"timeStorageClassUpdated\":\"2024-03-20T20:03:05.116Z\",\"id\":\"botco-dynamic-data.appspot.com/data (1).csv/1710964985116\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710964985116&alt=media\"},\"context\":{\"eventId\":\"1710964985117\",\"timestamp\":\"2024-03-20T20:03:05.117Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv\",\"type\":\"storage#object\"}}}"}}
[info] >  event {"user":"event","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m event"}}
[info] >    {"user":" ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  "}}
[info] >   { {"user":" {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  {"}}
[info] >    kind: 'storage#object', {"user":"  kind: 'storage#object',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   kind: 'storage#object',"}}
[info] >    name: 'data (1).csv', {"user":"  name: 'data (1).csv',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'data (1).csv',"}}
[info] >    bucket: 'botco-dynamic-data.appspot.com', {"user":"  bucket: 'botco-dynamic-data.appspot.com',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   bucket: 'botco-dynamic-data.appspot.com',"}}
[info] >    generation: '1710964985116', {"user":"  generation: '1710964985116',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   generation: '1710964985116',"}}
[info] >    metageneration: '1', {"user":"  metageneration: '1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   metageneration: '1',"}}
[info] >    contentType: 'text/csv', {"user":"  contentType: 'text/csv',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   contentType: 'text/csv',"}}
[info] >    timeCreated: '2024-03-20T20:03:05.116Z', {"user":"  timeCreated: '2024-03-20T20:03:05.116Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   timeCreated: '2024-03-20T20:03:05.116Z',"}}
[info] >    updated: '2024-03-20T20:03:05.116Z', {"user":"  updated: '2024-03-20T20:03:05.116Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   updated: '2024-03-20T20:03:05.116Z',"}}
[info] >    storageClass: 'STANDARD', {"user":"  storageClass: 'STANDARD',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   storageClass: 'STANDARD',"}}
[info] >    size: '18', {"user":"  size: '18',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   size: '18',"}}
[info] >    md5Hash: 't7iGCK/zdm3D8v+4kGRCuw==', {"user":"  md5Hash: 't7iGCK/zdm3D8v+4kGRCuw==',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   md5Hash: 't7iGCK/zdm3D8v+4kGRCuw==',"}}
[info] >    etag: 'BGpjPciesf1wGJkJR0uUBvnQyNU', {"user":"  etag: 'BGpjPciesf1wGJkJR0uUBvnQyNU',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   etag: 'BGpjPciesf1wGJkJR0uUBvnQyNU',"}}
[info] >    metadata: { {"user":"  metadata: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {"}}
[info] >      firebaseStorageDownloadTokens: '1600720a-3b9e-428b-8ec4-1ed7aaa78d34' {"user":"    firebaseStorageDownloadTokens: '1600720a-3b9e-428b-8ec4-1ed7aaa78d34'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m     firebaseStorageDownloadTokens: '1600720a-3b9e-428b-8ec4-1ed7aaa78d34'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    crc32c: 'FwJfIA==', {"user":"  crc32c: 'FwJfIA==',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   crc32c: 'FwJfIA==',"}}
[info] >    timeStorageClassUpdated: '2024-03-20T20:03:05.116Z', {"user":"  timeStorageClassUpdated: '2024-03-20T20:03:05.116Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   timeStorageClassUpdated: '2024-03-20T20:03:05.116Z',"}}
[info] >    id: 'botco-dynamic-data.appspot.com/data (1).csv/1710964985116', {"user":"  id: 'botco-dynamic-data.appspot.com/data (1).csv/1710964985116',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'botco-dynamic-data.appspot.com/data (1).csv/1710964985116',"}}
[info] >    selfLink: 'http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv', {"user":"  selfLink: 'http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   selfLink: 'http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv',"}}
[info] >    mediaLink: 'http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710964985116&alt=media' {"user":"  mediaLink: 'http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710964985116&alt=media'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   mediaLink: 'http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710964985116&alt=media'"}}
[info] >  }  {"user":"} ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m } "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[warn] ⚠  functions: TypeError: Cannot read properties of undefined (reading 'bucket')
    at createContactsFromCSV (/home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js:9:35)
    at cloudFunction (/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16
    at runFunction (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)
    at runBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)
    at processBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)
    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:149:13)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)
    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"TypeError: Cannot read properties of undefined (reading 'bucket')\n    at createContactsFromCSV (/home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js:9:35)\n    at cloudFunction (/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:518:16\n    at runFunction (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:15)\n    at runBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:11)\n    at processBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:11)\n    at /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:149:13)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:145:7)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2024-03-20T20:03:06.114Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-fileUpload" in 20.1952ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finished \"us-central1-fileUpload\" in 20.1952ms"}}
[debug] [2024-03-20T20:03:06.115Z] [worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: IDLE"}}
[debug] [2024-03-20T20:03:06.115Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-03-20T20:03:06.115Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-03-20T20:03:06.115Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:03:06.118Z] [worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: exited"}}
[debug] [2024-03-20T20:03:06.118Z] [worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-bd43985a-ba34-490d-a504-1b9cf07e341c]: FINISHED"}}
[debug] [2024-03-20T20:03:38.083Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:03:39.083Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:03:39.688Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:03:39.688Z] Building nodejs source
[debug] [2024-03-20T20:03:39.688Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:03:39.690Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:03:39.692Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8850

[error] (node:12097) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:03:40.123Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:04:19.449Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:04:20.450Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:04:21.089Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:04:21.089Z] Building nodejs source
[debug] [2024-03-20T20:04:21.089Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:04:21.090Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:04:21.091Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8931

[error] (node:12339) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:04:21.504Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:04:27.901Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.901Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.912Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.913Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.925Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.925Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.938Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.938Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.941Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.941Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.944Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.945Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.947Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.947Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.954Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.954Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.957Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.957Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.958Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.959Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.961Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.961Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.967Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.967Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.969Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.969Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.971Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.971Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.973Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.974Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.977Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.978Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.982Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:04:27.983Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:04:28.984Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:04:29.672Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:04:29.672Z] Building nodejs source
[debug] [2024-03-20T20:04:29.672Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:04:29.673Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:04:29.674Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[debug] [2024-03-20T20:04:29.781Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:04:29.782Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965069781","timestamp":"2024-03-20T20:04:29.781Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964985116","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:03:05.116Z","updated":"2024-03-20T20:03:05.116Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"BGpjPciesf1wGJkJR0uUBvnQyNU","metadata":{"firebaseStorageDownloadTokens":"1600720a-3b9e-428b-8ec4-1ed7aaa78d34"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:03:05.116Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710964985116","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710964985116&alt=media"}}
[debug] [2024-03-20T20:04:29.792Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:04:29.792Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:04:29.793Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:04:29.793Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"e264fab2-2822-4232-b906-86b11a840c72","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","time":"2024-03-20T20:03:05.116Z","data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710964985116","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:03:05.116Z","updated":"2024-03-20T20:03:05.116Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"BGpjPciesf1wGJkJR0uUBvnQyNU","metadata":{"firebaseStorageDownloadTokens":"1600720a-3b9e-428b-8ec4-1ed7aaa78d34"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:03:05.116Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710964985116","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710964985116&alt=media"}}
[debug] [2024-03-20T20:04:29.801Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:04:29.801Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] Serving at port 8993

[error] (node:12829) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:04:30.086Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:04:34.336Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:04:34.336Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965074336","timestamp":"2024-03-20T20:04:34.336Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965074335","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:04:34.335Z","updated":"2024-03-20T20:04:34.335Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"CrsArrkluUq7BOogji4c+2gEYAM","metadata":{"firebaseStorageDownloadTokens":"2e3b3fab-731c-4ec9-b90f-a453976912c0"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:04:34.335Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965074335","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965074335&alt=media"}}
[debug] [2024-03-20T20:04:34.338Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:04:34.338Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:04:34.338Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:04:34.338Z"],"workRunningCount":1}
[debug] [2024-03-20T20:04:34.339Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:04:34.340Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:04:34.340Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:04:34.340Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:04:34.340Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"7f5ab5d1-7c47-4b22-9312-a0b1acd10703","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","time":"2024-03-20T20:04:34.335Z","data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965074335","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:04:34.335Z","updated":"2024-03-20T20:04:34.335Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"CrsArrkluUq7BOogji4c+2gEYAM","metadata":{"firebaseStorageDownloadTokens":"2e3b3fab-731c-4ec9-b90f-a453976912c0"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:04:34.335Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965074335","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965074335&alt=media"}}
[debug] [2024-03-20T20:04:34.343Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:04:34.343Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:04:34.343Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:04:34.343Z"],"workRunningCount":1}
[debug] [2024-03-20T20:04:34.344Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:04:34.348Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:04:34.349Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[debug] [2024-03-20T20:04:34.349Z] [worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:04:34.363Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:04:34.363Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:04:34.368Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:04:34.368Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:12888) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:12888) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:12888) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:04:35.026Z] [runtime-status] [12888] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:04:35.027Z] [runtime-status] [12888] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:04:35.027Z] [runtime-status] [12888] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:04:35.028Z] [runtime-status] [12888] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:04:35.166Z] [runtime-status] [12888] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:04:35.167Z] [runtime-status] [12888] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:04:35.167Z] [runtime-status] [12888] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:04:35.167Z] [runtime-status] [12888] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:04:35.168Z] [runtime-status] [12888] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:04:35.168Z] [runtime-status] [12888] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:04:35.170Z] [runtime-status] [12888] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:04:35.300Z] [runtime-status] [12888] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:04:35.300Z] [runtime-status] [12888] Listening to port: /tmp/fire_emu_7fa3904b5cef6d2c.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] Listening to port: /tmp/fire_emu_7fa3904b5cef6d2c.sock"}}
[debug] [2024-03-20T20:04:35.380Z] [worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: IDLE"}}
[debug] [2024-03-20T20:04:35.381Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:04:35.381Z] [worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: BUSY"}}
[debug] [2024-03-20T20:04:35.388Z] [runtime-status] [12888] RunBackground {"data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965074335","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:04:34.335Z","updated":"2024-03-20T20:04:34.335Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"CrsArrkluUq7BOogji4c+2gEYAM","metadata":{"firebaseStorageDownloadTokens":"2e3b3fab-731c-4ec9-b90f-a453976912c0"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:04:34.335Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965074335","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965074335&alt=media"},"context":{"eventId":"1710965074336","timestamp":"2024-03-20T20:04:34.336Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [12888] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"data (1).csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710965074335\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:04:34.335Z\",\"updated\":\"2024-03-20T20:04:34.335Z\",\"storageClass\":\"STANDARD\",\"size\":\"18\",\"md5Hash\":\"t7iGCK/zdm3D8v+4kGRCuw==\",\"etag\":\"CrsArrkluUq7BOogji4c+2gEYAM\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"2e3b3fab-731c-4ec9-b90f-a453976912c0\"},\"crc32c\":\"FwJfIA==\",\"timeStorageClassUpdated\":\"2024-03-20T20:04:34.335Z\",\"id\":\"botco-dynamic-data.appspot.com/data (1).csv/1710965074335\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965074335&alt=media\"},\"context\":{\"eventId\":\"1710965074336\",\"timestamp\":\"2024-03-20T20:04:34.336Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv\",\"type\":\"storage#object\"}}}"}}
[info] >  event {"user":"event","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m event"}}
[info] >    {"user":" ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  "}}
[info] >   { {"user":" {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  {"}}
[info] >    kind: 'storage#object', {"user":"  kind: 'storage#object',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   kind: 'storage#object',"}}
[info] >    name: 'data (1).csv', {"user":"  name: 'data (1).csv',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'data (1).csv',"}}
[info] >    bucket: 'botco-dynamic-data.appspot.com', {"user":"  bucket: 'botco-dynamic-data.appspot.com',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   bucket: 'botco-dynamic-data.appspot.com',"}}
[info] >    generation: '1710965074335', {"user":"  generation: '1710965074335',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   generation: '1710965074335',"}}
[info] >    metageneration: '1', {"user":"  metageneration: '1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   metageneration: '1',"}}
[info] >    contentType: 'text/csv', {"user":"  contentType: 'text/csv',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   contentType: 'text/csv',"}}
[info] >    timeCreated: '2024-03-20T20:04:34.335Z', {"user":"  timeCreated: '2024-03-20T20:04:34.335Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   timeCreated: '2024-03-20T20:04:34.335Z',"}}
[info] >    updated: '2024-03-20T20:04:34.335Z', {"user":"  updated: '2024-03-20T20:04:34.335Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   updated: '2024-03-20T20:04:34.335Z',"}}
[info] >    storageClass: 'STANDARD', {"user":"  storageClass: 'STANDARD',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   storageClass: 'STANDARD',"}}
[info] >    size: '18', {"user":"  size: '18',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   size: '18',"}}
[info] >    md5Hash: 't7iGCK/zdm3D8v+4kGRCuw==', {"user":"  md5Hash: 't7iGCK/zdm3D8v+4kGRCuw==',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   md5Hash: 't7iGCK/zdm3D8v+4kGRCuw==',"}}
[info] >    etag: 'CrsArrkluUq7BOogji4c+2gEYAM', {"user":"  etag: 'CrsArrkluUq7BOogji4c+2gEYAM',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   etag: 'CrsArrkluUq7BOogji4c+2gEYAM',"}}
[info] >    metadata: { {"user":"  metadata: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {"}}
[info] >      firebaseStorageDownloadTokens: '2e3b3fab-731c-4ec9-b90f-a453976912c0' {"user":"    firebaseStorageDownloadTokens: '2e3b3fab-731c-4ec9-b90f-a453976912c0'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m     firebaseStorageDownloadTokens: '2e3b3fab-731c-4ec9-b90f-a453976912c0'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    crc32c: 'FwJfIA==', {"user":"  crc32c: 'FwJfIA==',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   crc32c: 'FwJfIA==',"}}
[info] >    timeStorageClassUpdated: '2024-03-20T20:04:34.335Z', {"user":"  timeStorageClassUpdated: '2024-03-20T20:04:34.335Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   timeStorageClassUpdated: '2024-03-20T20:04:34.335Z',"}}
[info] >    id: 'botco-dynamic-data.appspot.com/data (1).csv/1710965074335', {"user":"  id: 'botco-dynamic-data.appspot.com/data (1).csv/1710965074335',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'botco-dynamic-data.appspot.com/data (1).csv/1710965074335',"}}
[info] >    selfLink: 'http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv', {"user":"  selfLink: 'http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   selfLink: 'http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv',"}}
[info] >    mediaLink: 'http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965074335&alt=media' {"user":"  mediaLink: 'http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965074335&alt=media'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   mediaLink: 'http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965074335&alt=media'"}}
[info] >  }  {"user":"} ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m } "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[debug] [2024-03-20T20:04:35.416Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-fileUpload" in 35.636ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finished \"us-central1-fileUpload\" in 35.636ms"}}
[debug] [2024-03-20T20:04:35.417Z] [worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: IDLE"}}
[debug] [2024-03-20T20:04:35.417Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-03-20T20:04:35.417Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-03-20T20:04:35.417Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:05:40.616Z] File /home/enric/Personal/data-submitter/functions/src/index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/index.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:05:41.616Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:05:42.292Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:05:42.292Z] Building nodejs source
[debug] [2024-03-20T20:05:42.292Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:05:42.293Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:05:42.294Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8070

[error] (node:13126) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:05:42.730Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:05:47.758Z] [worker-pool] Shutting down IDLE worker (us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-fileUpload)"}}
[debug] [2024-03-20T20:05:47.758Z] [worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: FINISHING"}}
[debug] [2024-03-20T20:05:47.768Z] [worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: exited"}}
[debug] [2024-03-20T20:05:47.769Z] [worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9f93b7ff-b8e8-4a4e-a633-6e6315fa3616]: FINISHED"}}
[debug] [2024-03-20T20:06:31.346Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:06:32.347Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:06:32.975Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:06:32.975Z] Building nodejs source
[debug] [2024-03-20T20:06:32.975Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:06:32.976Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:06:32.976Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8869

[error] (node:13388) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:06:33.379Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:08:12.946Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:08:13.947Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:08:14.664Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:08:14.664Z] Building nodejs source
[debug] [2024-03-20T20:08:14.664Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:08:14.665Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:08:14.665Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[debug] [2024-03-20T20:08:14.749Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[info] Serving at port 8493

[error] (node:13709) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:08:15.248Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:08:15.751Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:08:16.376Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:08:16.376Z] Building nodejs source
[debug] [2024-03-20T20:08:16.376Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:08:16.377Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:08:16.378Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8217

[error] (node:13806) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:08:16.809Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:08:51.128Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:08:52.130Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:08:52.786Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:08:52.786Z] Building nodejs source
[debug] [2024-03-20T20:08:52.786Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:08:52.787Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:08:52.788Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8844

[error] (node:14021) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:08:53.239Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:08:57.388Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:08:58.389Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:08:59.068Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:08:59.068Z] Building nodejs source
[debug] [2024-03-20T20:08:59.068Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:08:59.070Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:08:59.071Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8391

[error] (node:14160) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:08:59.501Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:09:06.842Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.842Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.853Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.853Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.872Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.872Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.901Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.902Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.908Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.909Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.916Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.916Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.922Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.923Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.945Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.945Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.963Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.964Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.967Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:06.971Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.000Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.001Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.027Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.028Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.041Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.043Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.057Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.058Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.074Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.076Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.099Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.110Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.133Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:07.134Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:08.135Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:09:08.927Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:09:08.927Z] Building nodejs source
[debug] [2024-03-20T20:09:08.927Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:09:08.928Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:09:08.928Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8948

[debug] [2024-03-20T20:09:09.154Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:09:09.154Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965349153","timestamp":"2024-03-20T20:09:09.153Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965074335","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:04:34.335Z","updated":"2024-03-20T20:04:34.335Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"CrsArrkluUq7BOogji4c+2gEYAM","metadata":{"firebaseStorageDownloadTokens":"2e3b3fab-731c-4ec9-b90f-a453976912c0"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:04:34.335Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965074335","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965074335&alt=media"}}
[debug] [2024-03-20T20:09:09.159Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:09:09.159Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:09:09.160Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:09:09.160Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"798cb665-e25d-4af9-8b95-f8be660d6206","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","time":"2024-03-20T20:04:34.335Z","data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965074335","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:04:34.335Z","updated":"2024-03-20T20:04:34.335Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"CrsArrkluUq7BOogji4c+2gEYAM","metadata":{"firebaseStorageDownloadTokens":"2e3b3fab-731c-4ec9-b90f-a453976912c0"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:04:34.335Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965074335","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965074335&alt=media"}}
[debug] [2024-03-20T20:09:09.164Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:09:09.165Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[error] (node:14652) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:09:09.400Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:09:12.429Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:09:12.430Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965352428","timestamp":"2024-03-20T20:09:12.428Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965352426","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:09:12.426Z","updated":"2024-03-20T20:09:12.426Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"sNNSe9eIlnuwnUTqjokieLMOZOM","metadata":{"firebaseStorageDownloadTokens":"e88ad623-4526-49c5-83ee-9c2c0159fffa"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:09:12.426Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965352426","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965352426&alt=media"}}
[debug] [2024-03-20T20:09:12.441Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:09:12.441Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:09:12.442Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:09:12.441Z"],"workRunningCount":1}
[debug] [2024-03-20T20:09:12.443Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:09:12.444Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:09:12.444Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:09:12.445Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:09:12.445Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"e0d0a44d-8c07-4afc-b929-d82bc242d15d","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","time":"2024-03-20T20:09:12.426Z","data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965352426","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:09:12.426Z","updated":"2024-03-20T20:09:12.426Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"sNNSe9eIlnuwnUTqjokieLMOZOM","metadata":{"firebaseStorageDownloadTokens":"e88ad623-4526-49c5-83ee-9c2c0159fffa"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:09:12.426Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965352426","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965352426&alt=media"}}
[debug] [2024-03-20T20:09:12.451Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:09:12.451Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:09:12.452Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:09:12.451Z"],"workRunningCount":1}
[debug] [2024-03-20T20:09:12.452Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:09:12.456Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:09:12.457Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[debug] [2024-03-20T20:09:12.457Z] [worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:09:12.469Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:09:12.470Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:09:12.473Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:09:12.474Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:14694) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:14694) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:14694) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:09:13.045Z] [runtime-status] [14694] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:09:13.046Z] [runtime-status] [14694] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:09:13.047Z] [runtime-status] [14694] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:09:13.047Z] [runtime-status] [14694] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:09:13.177Z] [runtime-status] [14694] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:09:13.177Z] [runtime-status] [14694] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:09:13.177Z] [runtime-status] [14694] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:09:13.178Z] [runtime-status] [14694] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:09:13.179Z] [runtime-status] [14694] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:09:13.179Z] [runtime-status] [14694] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:09:13.182Z] [runtime-status] [14694] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:09:13.296Z] [runtime-status] [14694] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:09:13.297Z] [runtime-status] [14694] Listening to port: /tmp/fire_emu_ffbc2c13242ffb09.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] Listening to port: /tmp/fire_emu_ffbc2c13242ffb09.sock"}}
[debug] [2024-03-20T20:09:13.395Z] [worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: IDLE"}}
[debug] [2024-03-20T20:09:13.396Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:09:13.397Z] [worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: BUSY"}}
[debug] [2024-03-20T20:09:13.414Z] [runtime-status] [14694] RunBackground {"data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965352426","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:09:12.426Z","updated":"2024-03-20T20:09:12.426Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"sNNSe9eIlnuwnUTqjokieLMOZOM","metadata":{"firebaseStorageDownloadTokens":"e88ad623-4526-49c5-83ee-9c2c0159fffa"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:09:12.426Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965352426","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965352426&alt=media"},"context":{"eventId":"1710965352428","timestamp":"2024-03-20T20:09:12.428Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [14694] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"data (1).csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710965352426\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:09:12.426Z\",\"updated\":\"2024-03-20T20:09:12.426Z\",\"storageClass\":\"STANDARD\",\"size\":\"18\",\"md5Hash\":\"t7iGCK/zdm3D8v+4kGRCuw==\",\"etag\":\"sNNSe9eIlnuwnUTqjokieLMOZOM\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"e88ad623-4526-49c5-83ee-9c2c0159fffa\"},\"crc32c\":\"FwJfIA==\",\"timeStorageClassUpdated\":\"2024-03-20T20:09:12.426Z\",\"id\":\"botco-dynamic-data.appspot.com/data (1).csv/1710965352426\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965352426&alt=media\"},\"context\":{\"eventId\":\"1710965352428\",\"timestamp\":\"2024-03-20T20:09:12.428Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv\",\"type\":\"storage#object\"}}}"}}
[debug] [2024-03-20T20:09:13.443Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-fileUpload" in 46.411ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finished \"us-central1-fileUpload\" in 46.411ms"}}
[debug] [2024-03-20T20:09:13.443Z] [worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: IDLE"}}
[debug] [2024-03-20T20:09:13.444Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-03-20T20:09:13.444Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-03-20T20:09:13.444Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:09:14.422Z] [worker-pool] Shutting down IDLE worker (us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-fileUpload)"}}
[debug] [2024-03-20T20:09:14.422Z] [worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: FINISHING"}}
[debug] [2024-03-20T20:09:14.449Z] [worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: exited"}}
[debug] [2024-03-20T20:09:14.449Z] [worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-959cd03e-2c93-41f2-9dde-4db78cfdf552]: FINISHED"}}
[debug] [2024-03-20T20:09:21.169Z] Mar 20, 2024 4:09:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:21.356Z] Mar 20, 2024 4:09:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:21.672Z] Mar 20, 2024 4:09:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:21.783Z] Mar 20, 2024 4:09:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:21 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:23.192Z] Mar 20, 2024 4:09:23 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:23 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:23.365Z] Mar 20, 2024 4:09:23 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:23 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:24.330Z] Mar 20, 2024 4:09:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:31.324Z] Mar 20, 2024 4:09:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:41.346Z] Mar 20, 2024 4:09:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:45.162Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:09:46.163Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:09:46.826Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:09:46.826Z] Building nodejs source
[debug] [2024-03-20T20:09:46.826Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:09:46.827Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:09:46.828Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8207

[error] (node:14912) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:09:47.198Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:09:51.368Z] Mar 20, 2024 4:09:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:09:53.723Z] Mar 20, 2024 4:09:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:53.723Z] Mar 20, 2024 4:09:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:09:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:09:57.095Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.096Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.112Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.113Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.127Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.128Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.138Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.138Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.142Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.142Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.146Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.146Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.150Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.150Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.164Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.164Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.168Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.168Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.169Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.169Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.173Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.178Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.182Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.182Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.185Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.185Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.187Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.187Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.191Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.192Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.197Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.197Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.202Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:09:57.203Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:09:58.204Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:09:59.014Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:09:59.014Z] Building nodejs source
[debug] [2024-03-20T20:09:59.014Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:09:59.015Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:09:59.016Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8361

[error] (node:15443) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:09:59.623Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:10:01.394Z] Mar 20, 2024 4:10:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:10:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:10:06.559Z] Mar 20, 2024 4:10:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:10:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:10:06.564Z] Mar 20, 2024 4:10:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:10:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:10:10.327Z] Mar 20, 2024 4:10:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:10:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:10:10.354Z] Mar 20, 2024 4:10:10 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:10:10 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2024-03-20T20:10:11.985Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:10:11.986Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965411985","timestamp":"2024-03-20T20:10:11.985Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965352426","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:09:12.426Z","updated":"2024-03-20T20:09:12.426Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"sNNSe9eIlnuwnUTqjokieLMOZOM","metadata":{"firebaseStorageDownloadTokens":"e88ad623-4526-49c5-83ee-9c2c0159fffa"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:09:12.426Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965352426","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965352426&alt=media"}}
[debug] [2024-03-20T20:10:11.988Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:10:11.988Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:10:11.989Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:10:11.989Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"d34a882d-c68e-4210-9cdb-76c5ce9ceaa0","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data (1).csv","time":"2024-03-20T20:09:12.426Z","data":{"kind":"storage#object","name":"data (1).csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965352426","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:09:12.426Z","updated":"2024-03-20T20:09:12.426Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"sNNSe9eIlnuwnUTqjokieLMOZOM","metadata":{"firebaseStorageDownloadTokens":"e88ad623-4526-49c5-83ee-9c2c0159fffa"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:09:12.426Z","id":"botco-dynamic-data.appspot.com/data (1).csv/1710965352426","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data%20(1).csv?generation=1710965352426&alt=media"}}
[debug] [2024-03-20T20:10:11.990Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:10:11.990Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:10:28.128Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:10:28.129Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965428128","timestamp":"2024-03-20T20:10:28.128Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965428127","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:10:28.127Z","updated":"2024-03-20T20:10:28.127Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"3QXqYn+Qjm4GaO4IqGGfvi6SXd8","metadata":{"firebaseStorageDownloadTokens":"7d82605e-a2f6-4c37-8c5e-8b19fe104b36"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:10:28.127Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965428127","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965428127&alt=media"}}
[debug] [2024-03-20T20:10:28.133Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:10:28.133Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:10:28.134Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:10:28.133Z"],"workRunningCount":1}
[debug] [2024-03-20T20:10:28.135Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:10:28.135Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:10:28.136Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:10:28.136Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:10:28.136Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"e8b631da-7d96-48ae-bad6-81aa4d81ecae","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","time":"2024-03-20T20:10:28.127Z","data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965428127","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:10:28.127Z","updated":"2024-03-20T20:10:28.127Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"3QXqYn+Qjm4GaO4IqGGfvi6SXd8","metadata":{"firebaseStorageDownloadTokens":"7d82605e-a2f6-4c37-8c5e-8b19fe104b36"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:10:28.127Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965428127","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965428127&alt=media"}}
[debug] [2024-03-20T20:10:28.144Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:10:28.142Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:10:28.146Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:10:28.142Z"],"workRunningCount":1}
[debug] [2024-03-20T20:10:28.146Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:10:28.150Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:10:28.150Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[debug] [2024-03-20T20:10:28.150Z] [worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:10:28.163Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:10:28.163Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:10:28.168Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:10:28.168Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:15577) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:15577) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:15577) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:10:28.719Z] [runtime-status] [15577] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:10:28.720Z] [runtime-status] [15577] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:10:28.720Z] [runtime-status] [15577] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:10:28.721Z] [runtime-status] [15577] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:10:28.846Z] [runtime-status] [15577] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:10:28.846Z] [runtime-status] [15577] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:10:28.846Z] [runtime-status] [15577] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:10:28.847Z] [runtime-status] [15577] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:10:28.847Z] [runtime-status] [15577] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:10:28.848Z] [runtime-status] [15577] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:10:28.849Z] [runtime-status] [15577] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:10:28.964Z] [runtime-status] [15577] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:10:28.965Z] [runtime-status] [15577] Listening to port: /tmp/fire_emu_3a22d72d5cc0d84d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] Listening to port: /tmp/fire_emu_3a22d72d5cc0d84d.sock"}}
[debug] [2024-03-20T20:10:28.979Z] [worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: IDLE"}}
[debug] [2024-03-20T20:10:28.979Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:10:28.980Z] [worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: BUSY"}}
[debug] [2024-03-20T20:10:28.987Z] [runtime-status] [15577] RunBackground {"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965428127","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:10:28.127Z","updated":"2024-03-20T20:10:28.127Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"3QXqYn+Qjm4GaO4IqGGfvi6SXd8","metadata":{"firebaseStorageDownloadTokens":"7d82605e-a2f6-4c37-8c5e-8b19fe104b36"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:10:28.127Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965428127","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965428127&alt=media"},"context":{"eventId":"1710965428128","timestamp":"2024-03-20T20:10:28.128Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [15577] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"data.csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710965428127\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:10:28.127Z\",\"updated\":\"2024-03-20T20:10:28.127Z\",\"storageClass\":\"STANDARD\",\"size\":\"18\",\"md5Hash\":\"t7iGCK/zdm3D8v+4kGRCuw==\",\"etag\":\"3QXqYn+Qjm4GaO4IqGGfvi6SXd8\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"7d82605e-a2f6-4c37-8c5e-8b19fe104b36\"},\"crc32c\":\"FwJfIA==\",\"timeStorageClassUpdated\":\"2024-03-20T20:10:28.127Z\",\"id\":\"botco-dynamic-data.appspot.com/data.csv/1710965428127\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965428127&alt=media\"},\"context\":{\"eventId\":\"1710965428128\",\"timestamp\":\"2024-03-20T20:10:28.128Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv\",\"type\":\"storage#object\"}}}"}}
[info] >  buffer {"user":"buffer","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m buffer"}}
[info] >    {"user":" ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  "}}
[info] >   <Buffer 22 44 65 63 65 6d 62 65 72 20 31 2c 20 32 30 32 33 22>  {"user":" <Buffer 22 44 65 63 65 6d 62 65 72 20 31 2c 20 32 30 32 33 22> ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  <Buffer 22 44 65 63 65 6d 62 65 72 20 31 2c 20 32 30 32 33 22> "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[debug] [2024-03-20T20:10:29.013Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-fileUpload" in 33.5018ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finished \"us-central1-fileUpload\" in 33.5018ms"}}
[debug] [2024-03-20T20:10:29.014Z] [worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: IDLE"}}
[debug] [2024-03-20T20:10:29.014Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-03-20T20:10:29.014Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-03-20T20:10:29.014Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:10:57.236Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:10:58.238Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:10:58.901Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:10:58.901Z] Building nodejs source
[debug] [2024-03-20T20:10:58.901Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:10:58.903Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:10:58.903Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8268

[error] (node:15766) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:10:59.321Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:11:04.333Z] [worker-pool] Shutting down IDLE worker (us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-fileUpload)"}}
[debug] [2024-03-20T20:11:04.334Z] [worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: FINISHING"}}
[debug] [2024-03-20T20:11:04.337Z] [worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: exited"}}
[debug] [2024-03-20T20:11:04.337Z] [worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-ab994f80-6651-4bc1-ae07-b65ca047977b]: FINISHED"}}
[debug] [2024-03-20T20:11:05.114Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:11:05.114Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965465114","timestamp":"2024-03-20T20:11:05.114Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965428127","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:10:28.127Z","updated":"2024-03-20T20:10:28.127Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"3QXqYn+Qjm4GaO4IqGGfvi6SXd8","metadata":{"firebaseStorageDownloadTokens":"7d82605e-a2f6-4c37-8c5e-8b19fe104b36"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:10:28.127Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965428127","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965428127&alt=media"}}
[debug] [2024-03-20T20:11:05.122Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:11:05.122Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:11:05.122Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:11:05.122Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"1e4e0e6a-d755-4c5f-b0a0-c8acf3af33e9","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","time":"2024-03-20T20:10:28.127Z","data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965428127","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:10:28.127Z","updated":"2024-03-20T20:10:28.127Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"3QXqYn+Qjm4GaO4IqGGfvi6SXd8","metadata":{"firebaseStorageDownloadTokens":"7d82605e-a2f6-4c37-8c5e-8b19fe104b36"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:10:28.127Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965428127","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965428127&alt=media"}}
[debug] [2024-03-20T20:11:05.129Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:11:05.129Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:11:06.869Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.869Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.883Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.883Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.898Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.898Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.911Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.911Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.915Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.915Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.919Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.919Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.923Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.924Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.928Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.928Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.932Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.933Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.933Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.933Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.936Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.937Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.942Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.942Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.945Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.945Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.947Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.948Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.952Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.953Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.957Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.958Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.964Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:11:06.965Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:11:07.966Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:11:08.690Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:11:08.690Z] Building nodejs source
[debug] [2024-03-20T20:11:08.690Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:11:08.691Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:11:08.691Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8104

[error] (node:16262) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:11:09.659Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:11:11.355Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:11:11.355Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965471355","timestamp":"2024-03-20T20:11:11.355Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965471354","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:11:11.355Z","updated":"2024-03-20T20:11:11.355Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"zf1ZyOoTHEgjPJnP/6/XoCkRX3Y","metadata":{"firebaseStorageDownloadTokens":"3378e5ee-761b-4658-a699-76b944120bf8"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:11:11.355Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965471354","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965471354&alt=media"}}
[debug] [2024-03-20T20:11:11.360Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:11:11.360Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:11:11.362Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:11:11.360Z"],"workRunningCount":1}
[debug] [2024-03-20T20:11:11.363Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:11:11.364Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:11:11.364Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:11:11.364Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:11:11.364Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"1621cf6e-c3f3-4ba7-b087-ddadd892560d","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","time":"2024-03-20T20:11:11.355Z","data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965471354","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:11:11.355Z","updated":"2024-03-20T20:11:11.355Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"zf1ZyOoTHEgjPJnP/6/XoCkRX3Y","metadata":{"firebaseStorageDownloadTokens":"3378e5ee-761b-4658-a699-76b944120bf8"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:11:11.355Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965471354","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965471354&alt=media"}}
[debug] [2024-03-20T20:11:11.369Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:11:11.369Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:11:11.369Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:11:11.369Z"],"workRunningCount":1}
[debug] [2024-03-20T20:11:11.370Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:11:11.374Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:11:11.374Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[debug] [2024-03-20T20:11:11.375Z] [worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:11:11.382Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:11:11.382Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:11:11.384Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:11:11.384Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:16315) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:16315) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:16315) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:11:11.997Z] [runtime-status] [16315] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:11:11.998Z] [runtime-status] [16315] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:11:11.998Z] [runtime-status] [16315] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:11:11.999Z] [runtime-status] [16315] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:11:12.124Z] [runtime-status] [16315] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:11:12.124Z] [runtime-status] [16315] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:11:12.124Z] [runtime-status] [16315] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:11:12.125Z] [runtime-status] [16315] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:11:12.126Z] [runtime-status] [16315] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:11:12.126Z] [runtime-status] [16315] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:11:12.127Z] [runtime-status] [16315] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:11:12.324Z] [runtime-status] [16315] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:11:12.325Z] [runtime-status] [16315] Listening to port: /tmp/fire_emu_bab51705cd8c3f08.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] Listening to port: /tmp/fire_emu_bab51705cd8c3f08.sock"}}
[debug] [2024-03-20T20:11:12.396Z] [worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: IDLE"}}
[debug] [2024-03-20T20:11:12.396Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:11:12.396Z] [worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: BUSY"}}
[debug] [2024-03-20T20:11:12.406Z] [runtime-status] [16315] RunBackground {"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965471354","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:11:11.355Z","updated":"2024-03-20T20:11:11.355Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"zf1ZyOoTHEgjPJnP/6/XoCkRX3Y","metadata":{"firebaseStorageDownloadTokens":"3378e5ee-761b-4658-a699-76b944120bf8"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:11:11.355Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965471354","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965471354&alt=media"},"context":{"eventId":"1710965471355","timestamp":"2024-03-20T20:11:11.355Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16315] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"data.csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710965471354\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:11:11.355Z\",\"updated\":\"2024-03-20T20:11:11.355Z\",\"storageClass\":\"STANDARD\",\"size\":\"18\",\"md5Hash\":\"t7iGCK/zdm3D8v+4kGRCuw==\",\"etag\":\"zf1ZyOoTHEgjPJnP/6/XoCkRX3Y\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"3378e5ee-761b-4658-a699-76b944120bf8\"},\"crc32c\":\"FwJfIA==\",\"timeStorageClassUpdated\":\"2024-03-20T20:11:11.355Z\",\"id\":\"botco-dynamic-data.appspot.com/data.csv/1710965471354\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965471354&alt=media\"},\"context\":{\"eventId\":\"1710965471355\",\"timestamp\":\"2024-03-20T20:11:11.355Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv\",\"type\":\"storage#object\"}}}"}}
[info] >  data {"user":"data","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m data"}}
[info] >    {"user":" ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  "}}
[info] >   []  {"user":[],"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  [] "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[debug] [2024-03-20T20:11:12.440Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-fileUpload" in 44.212ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finished \"us-central1-fileUpload\" in 44.212ms"}}
[debug] [2024-03-20T20:11:12.441Z] [worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: IDLE"}}
[debug] [2024-03-20T20:11:12.441Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-03-20T20:11:12.441Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-03-20T20:11:12.441Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:11:14.680Z] [worker-pool] Shutting down IDLE worker (us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-fileUpload)"}}
[debug] [2024-03-20T20:11:14.681Z] [worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: FINISHING"}}
[debug] [2024-03-20T20:11:14.690Z] [worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: exited"}}
[debug] [2024-03-20T20:11:14.690Z] [worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-d5a930e6-3cb3-460c-a826-64e1653a9ad7]: FINISHED"}}
[debug] [2024-03-20T20:12:08.097Z] File /home/enric/Personal/data-submitter/functions/src/sms/example.csv changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/example.csv changed, reloading triggers"}}
[debug] [2024-03-20T20:12:09.099Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:12:09.721Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:12:09.721Z] Building nodejs source
[debug] [2024-03-20T20:12:09.721Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:12:09.723Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:12:09.724Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8001

[error] (node:16546) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:12:10.149Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:14:16.782Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:14:16.783Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965656781","timestamp":"2024-03-20T20:14:16.781Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965656779","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:14:16.779Z","updated":"2024-03-20T20:14:16.779Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"SAobVSQL4MIYlMDsg8VO3cTXHog","metadata":{"firebaseStorageDownloadTokens":"adbc29ff-5690-4509-a4e5-068e1e7405f8"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:14:16.779Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965656779","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965656779&alt=media"}}
[debug] [2024-03-20T20:14:16.793Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:14:16.793Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:14:16.794Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:14:16.793Z"],"workRunningCount":1}
[debug] [2024-03-20T20:14:16.795Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:14:16.797Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:14:16.797Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:14:16.797Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:14:16.797Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"db971b25-015c-4e8c-91c6-6396ad78d7d7","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","time":"2024-03-20T20:14:16.779Z","data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965656779","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:14:16.779Z","updated":"2024-03-20T20:14:16.779Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"SAobVSQL4MIYlMDsg8VO3cTXHog","metadata":{"firebaseStorageDownloadTokens":"adbc29ff-5690-4509-a4e5-068e1e7405f8"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:14:16.779Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965656779","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965656779&alt=media"}}
[debug] [2024-03-20T20:14:16.803Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:14:16.802Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:14:16.803Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:14:16.802Z"],"workRunningCount":1}
[debug] [2024-03-20T20:14:16.805Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:14:16.810Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:14:16.810Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[debug] [2024-03-20T20:14:16.810Z] [worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:14:16.820Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:14:16.821Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:14:16.825Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:14:16.826Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:16890) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:16890) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:16890) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:14:17.467Z] [runtime-status] [16890] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:14:17.468Z] [runtime-status] [16890] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:14:17.468Z] [runtime-status] [16890] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:14:17.469Z] [runtime-status] [16890] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:14:17.589Z] [runtime-status] [16890] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:14:17.590Z] [runtime-status] [16890] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:14:17.590Z] [runtime-status] [16890] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:14:17.590Z] [runtime-status] [16890] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:14:17.591Z] [runtime-status] [16890] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:14:17.591Z] [runtime-status] [16890] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:14:17.593Z] [runtime-status] [16890] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:14:17.712Z] [runtime-status] [16890] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:14:17.713Z] [runtime-status] [16890] Listening to port: /tmp/fire_emu_fbddef34bcd0ade0.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] Listening to port: /tmp/fire_emu_fbddef34bcd0ade0.sock"}}
[debug] [2024-03-20T20:14:17.733Z] [worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: IDLE"}}
[debug] [2024-03-20T20:14:17.734Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:14:17.734Z] [worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: BUSY"}}
[debug] [2024-03-20T20:14:17.742Z] [runtime-status] [16890] RunBackground {"data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965656779","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:14:16.779Z","updated":"2024-03-20T20:14:16.779Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"SAobVSQL4MIYlMDsg8VO3cTXHog","metadata":{"firebaseStorageDownloadTokens":"adbc29ff-5690-4509-a4e5-068e1e7405f8"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:14:16.779Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965656779","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965656779&alt=media"},"context":{"eventId":"1710965656781","timestamp":"2024-03-20T20:14:16.781Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [16890] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"example.csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710965656779\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:14:16.779Z\",\"updated\":\"2024-03-20T20:14:16.779Z\",\"storageClass\":\"STANDARD\",\"size\":\"106\",\"md5Hash\":\"EO5wA5Wcdke1+yfWioa5sQ==\",\"etag\":\"SAobVSQL4MIYlMDsg8VO3cTXHog\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"adbc29ff-5690-4509-a4e5-068e1e7405f8\"},\"crc32c\":\"e0VHwg==\",\"timeStorageClassUpdated\":\"2024-03-20T20:14:16.779Z\",\"id\":\"botco-dynamic-data.appspot.com/example.csv/1710965656779\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965656779&alt=media\"},\"context\":{\"eventId\":\"1710965656781\",\"timestamp\":\"2024-03-20T20:14:16.781Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv\",\"type\":\"storage#object\"}}}"}}
[info] >  data {"user":"data","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m data"}}
[info] >    {"user":" ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  "}}
[info] >   [ {"user":" [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m  ["}}
[info] >    { name: 'Bob', phone: '555-555-5555' }, {"user":"  { name: 'Bob', phone: '555-555-5555' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   { name: 'Bob', phone: '555-555-5555' },"}}
[info] >    { name: 'Alice', phone: '555-555-5556' }, {"user":"  { name: 'Alice', phone: '555-555-5556' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   { name: 'Alice', phone: '555-555-5556' },"}}
[info] >    { name: 'Carol', phone: '555-555-5557' }, {"user":"  { name: 'Carol', phone: '555-555-5557' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   { name: 'Carol', phone: '555-555-5557' },"}}
[info] >    { name: 'Dave', phone: '555-555-5558' }, {"user":"  { name: 'Dave', phone: '555-555-5558' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   { name: 'Dave', phone: '555-555-5558' },"}}
[info] >    { name: 'Elsa', phone: '555-555-5559' } {"user":"  { name: 'Elsa', phone: '555-555-5559' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m   { name: 'Elsa', phone: '555-555-5559' }"}}
[info] >  ]  {"user":"] ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m ] "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  { name: 'Bob', phone: '555-555-5555' } {"user":"{ name: 'Bob', phone: '555-555-5555' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Bob', phone: '555-555-5555' }"}}
[debug] [2024-03-20T20:14:17.992Z] Mar 20, 2024 4:14:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  { name: 'Alice', phone: '555-555-5556' } {"user":"{ name: 'Alice', phone: '555-555-5556' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Alice', phone: '555-555-5556' }"}}
[info] >  { name: 'Carol', phone: '555-555-5557' } {"user":"{ name: 'Carol', phone: '555-555-5557' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Carol', phone: '555-555-5557' }"}}
[info] >  { name: 'Dave', phone: '555-555-5558' } {"user":"{ name: 'Dave', phone: '555-555-5558' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Dave', phone: '555-555-5558' }"}}
[info] >  { name: 'Elsa', phone: '555-555-5559' } {"user":"{ name: 'Elsa', phone: '555-555-5559' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Elsa', phone: '555-555-5559' }"}}
[debug] [2024-03-20T20:14:18.098Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-fileUpload" in 364.7731ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finished \"us-central1-fileUpload\" in 364.7731ms"}}
[debug] [2024-03-20T20:14:18.099Z] [worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: IDLE"}}
[debug] [2024-03-20T20:14:18.099Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-03-20T20:14:18.099Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-03-20T20:14:18.099Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:14:27.712Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:14:28.713Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:14:29.456Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:14:29.456Z] Building nodejs source
[debug] [2024-03-20T20:14:29.457Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:14:29.458Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:14:29.459Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8208

[error] (node:17058) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:14:29.986Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:14:31.424Z] Mar 20, 2024 4:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:14:31.536Z] Mar 20, 2024 4:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:14:31.583Z] Mar 20, 2024 4:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:14:31.708Z] Mar 20, 2024 4:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:14:32.601Z] Mar 20, 2024 4:14:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:14:32.707Z] Mar 20, 2024 4:14:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:14:33.366Z] Mar 20, 2024 4:14:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:14:34.997Z] [worker-pool] Shutting down IDLE worker (us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-fileUpload)"}}
[debug] [2024-03-20T20:14:34.997Z] [worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: FINISHING"}}
[debug] [2024-03-20T20:14:35.001Z] [worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: exited"}}
[debug] [2024-03-20T20:14:35.001Z] [worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-6e638138-241b-4c34-bb9b-9ad8a1d4361b]: FINISHED"}}
[debug] [2024-03-20T20:14:38.696Z] Mar 20, 2024 4:14:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:14:48.666Z] Mar 20, 2024 4:14:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:14:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:15:18.433Z] Mar 20, 2024 4:15:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:15:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:15:18.720Z] Mar 20, 2024 4:15:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:15:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:15:19.629Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:15:20.630Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:15:21.254Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:15:21.254Z] Building nodejs source
[debug] [2024-03-20T20:15:21.254Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:15:21.256Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:15:21.256Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8016

[error] (node:17329) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:15:21.651Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:15:28.753Z] Mar 20, 2024 4:15:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:15:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:15:44.996Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:15:45.996Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:15:46.660Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:15:46.661Z] Building nodejs source
[debug] [2024-03-20T20:15:46.661Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:15:46.661Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:15:46.662Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8135

[error] (node:17545) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:15:47.021Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:16:03.459Z] Mar 20, 2024 4:16:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:16:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:16:47.216Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:16:48.217Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:16:48.905Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:16:48.905Z] Building nodejs source
[debug] [2024-03-20T20:16:48.905Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:16:48.907Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:16:48.907Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[debug] [2024-03-20T20:16:48.911Z] Mar 20, 2024 4:16:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:16:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:16:48.993Z] Mar 20, 2024 4:16:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:16:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] Serving at port 8544

[error] (node:17817) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:16:49.264Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:17:01.212Z] Mar 20, 2024 4:17:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:01.213Z] Mar 20, 2024 4:17:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:01.323Z] Mar 20, 2024 4:17:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:01.363Z] Mar 20, 2024 4:17:01 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:01 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2024-03-20T20:17:03.251Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:17:03.251Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965823251","timestamp":"2024-03-20T20:17:03.251Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965471354","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:11:11.355Z","updated":"2024-03-20T20:11:11.355Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"zf1ZyOoTHEgjPJnP/6/XoCkRX3Y","metadata":{"firebaseStorageDownloadTokens":"3378e5ee-761b-4658-a699-76b944120bf8"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:11:11.355Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965471354","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965471354&alt=media"}}
[debug] [2024-03-20T20:17:03.254Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:17:03.254Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965823254","timestamp":"2024-03-20T20:17:03.254Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965656779","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:14:16.779Z","updated":"2024-03-20T20:14:16.779Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"SAobVSQL4MIYlMDsg8VO3cTXHog","metadata":{"firebaseStorageDownloadTokens":"adbc29ff-5690-4509-a4e5-068e1e7405f8"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:14:16.779Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965656779","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965656779&alt=media"}}
[debug] [2024-03-20T20:17:03.258Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:17:03.259Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:17:03.259Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:17:03.259Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"30391d7d-61af-46cc-b588-855596b2edec","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/data.csv","time":"2024-03-20T20:11:11.355Z","data":{"kind":"storage#object","name":"data.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965471354","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:11:11.355Z","updated":"2024-03-20T20:11:11.355Z","storageClass":"STANDARD","size":"18","md5Hash":"t7iGCK/zdm3D8v+4kGRCuw==","etag":"zf1ZyOoTHEgjPJnP/6/XoCkRX3Y","metadata":{"firebaseStorageDownloadTokens":"3378e5ee-761b-4658-a699-76b944120bf8"},"crc32c":"FwJfIA==","timeStorageClassUpdated":"2024-03-20T20:11:11.355Z","id":"botco-dynamic-data.appspot.com/data.csv/1710965471354","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/data.csv?generation=1710965471354&alt=media"}}
[debug] [2024-03-20T20:17:03.261Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:17:03.261Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:17:03.262Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:17:03.262Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:17:03.262Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:17:03.262Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"40487848-5d44-4901-8f0c-69fd46b2070d","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","time":"2024-03-20T20:14:16.779Z","data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965656779","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:14:16.779Z","updated":"2024-03-20T20:14:16.779Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"SAobVSQL4MIYlMDsg8VO3cTXHog","metadata":{"firebaseStorageDownloadTokens":"adbc29ff-5690-4509-a4e5-068e1e7405f8"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:14:16.779Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965656779","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965656779&alt=media"}}
[debug] [2024-03-20T20:17:03.266Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:17:03.266Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:17:03.413Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.413Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.429Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.429Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.440Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.440Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.446Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.447Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.449Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.450Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.452Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.452Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.456Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.456Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.460Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.461Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.463Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.464Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.464Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.464Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.468Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.468Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.472Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.472Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.474Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.474Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.476Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.477Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.479Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.479Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.482Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.482Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.488Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:17:03.488Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:17:04.489Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:17:05.371Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:17:05.371Z] Building nodejs source
[debug] [2024-03-20T20:17:05.371Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:17:05.372Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:17:05.372Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8034

[error] (node:18366) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:17:05.747Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:17:09.826Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:17:09.826Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710965829825","timestamp":"2024-03-20T20:17:09.825Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965829824","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:17:09.825Z","updated":"2024-03-20T20:17:09.825Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"6bXI65ct06zSoC3oUcOIW4NdM2E","metadata":{"firebaseStorageDownloadTokens":"188c0d5a-c350-4767-9eb0-ee40ef941c3e"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:17:09.825Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965829824","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965829824&alt=media"}}
[debug] [2024-03-20T20:17:09.828Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:17:09.828Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:17:09.828Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:17:09.828Z"],"workRunningCount":1}
[debug] [2024-03-20T20:17:09.829Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:17:09.830Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:17:09.830Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:17:09.830Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:17:09.830Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"2b653c42-a1b9-45e2-a48b-429258e31f41","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","time":"2024-03-20T20:17:09.825Z","data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965829824","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:17:09.825Z","updated":"2024-03-20T20:17:09.825Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"6bXI65ct06zSoC3oUcOIW4NdM2E","metadata":{"firebaseStorageDownloadTokens":"188c0d5a-c350-4767-9eb0-ee40ef941c3e"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:17:09.825Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965829824","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965829824&alt=media"}}
[debug] [2024-03-20T20:17:09.835Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:17:09.835Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:17:09.835Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:17:09.835Z"],"workRunningCount":1}
[debug] [2024-03-20T20:17:09.835Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:17:09.839Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:17:09.841Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[debug] [2024-03-20T20:17:09.841Z] [worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:17:09.852Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:17:09.852Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:17:09.856Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:17:09.856Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:18424) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:18424) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:18424) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:17:10.440Z] [runtime-status] [18424] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:17:10.441Z] [runtime-status] [18424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:17:10.441Z] [runtime-status] [18424] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:17:10.441Z] [runtime-status] [18424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:17:10.574Z] [runtime-status] [18424] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:17:10.574Z] [runtime-status] [18424] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:17:10.574Z] [runtime-status] [18424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:17:10.575Z] [runtime-status] [18424] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:17:10.576Z] [runtime-status] [18424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:17:10.576Z] [runtime-status] [18424] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:17:10.577Z] [runtime-status] [18424] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:17:10.700Z] [runtime-status] [18424] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:17:10.701Z] [runtime-status] [18424] Listening to port: /tmp/fire_emu_68dd5644f200454e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] Listening to port: /tmp/fire_emu_68dd5644f200454e.sock"}}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:17:10.766Z] [worker-us-central1-fileUpload-b6905049-2114-46ab-9dfb-521037c82ff4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-b6905049-2114-46ab-9dfb-521037c82ff4]: IDLE"}}
[debug] [2024-03-20T20:17:10.766Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:17:10.766Z] [worker-us-central1-fileUpload-b6905049-2114-46ab-9dfb-521037c82ff4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-b6905049-2114-46ab-9dfb-521037c82ff4]: BUSY"}}
[debug] [2024-03-20T20:17:10.774Z] [runtime-status] [18424] RunBackground {"data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965829824","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:17:09.825Z","updated":"2024-03-20T20:17:09.825Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"6bXI65ct06zSoC3oUcOIW4NdM2E","metadata":{"firebaseStorageDownloadTokens":"188c0d5a-c350-4767-9eb0-ee40ef941c3e"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:17:09.825Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965829824","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965829824&alt=media"},"context":{"eventId":"1710965829825","timestamp":"2024-03-20T20:17:09.825Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [18424] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"example.csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710965829824\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:17:09.825Z\",\"updated\":\"2024-03-20T20:17:09.825Z\",\"storageClass\":\"STANDARD\",\"size\":\"106\",\"md5Hash\":\"EO5wA5Wcdke1+yfWioa5sQ==\",\"etag\":\"6bXI65ct06zSoC3oUcOIW4NdM2E\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"188c0d5a-c350-4767-9eb0-ee40ef941c3e\"},\"crc32c\":\"e0VHwg==\",\"timeStorageClassUpdated\":\"2024-03-20T20:17:09.825Z\",\"id\":\"botco-dynamic-data.appspot.com/example.csv/1710965829824\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965829824&alt=media\"},\"context\":{\"eventId\":\"1710965829825\",\"timestamp\":\"2024-03-20T20:17:09.825Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv\",\"type\":\"storage#object\"}}}"}}
[info] >  { name: 'Bob', phone: '555-555-5555' } {"user":"{ name: 'Bob', phone: '555-555-5555' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Bob', phone: '555-555-5555' }"}}
[warn] ⚠  functions: Error: Value for argument "documentPath" must point to a document, but was "test". Your path does not contain an even number of components.
    at Firestore.doc (/home/enric/Personal/data-submitter/functions/node_modules/@google-cloud/firestore/build/src/index.js:654:19)
    at createContactsFromCSV (/home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js:16:29)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async runFunction (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:9)
    at async runBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:5)
    at async processBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:5)
    at async /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:21 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Error: Value for argument \"documentPath\" must point to a document, but was \"test\". Your path does not contain an even number of components.\n    at Firestore.doc (/home/enric/Personal/data-submitter/functions/node_modules/@google-cloud/firestore/build/src/index.js:654:19)\n    at createContactsFromCSV (/home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js:16:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:506:9)\n    at async runBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:517:5)\n    at async processBackground (/home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:501:5)\n    at async /home/enric/.asdf/installs/nodejs/21.4.0/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:21"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2024-03-20T20:17:10.803Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:17:10.803Z] [worker-us-central1-fileUpload-b6905049-2114-46ab-9dfb-521037c82ff4]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-b6905049-2114-46ab-9dfb-521037c82ff4]: exited"}}
[debug] [2024-03-20T20:17:10.803Z] [worker-us-central1-fileUpload-b6905049-2114-46ab-9dfb-521037c82ff4]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-b6905049-2114-46ab-9dfb-521037c82ff4]: FINISHED"}}
[debug] [2024-03-20T20:17:13.629Z] Mar 20, 2024 4:17:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:13.670Z] Mar 20, 2024 4:17:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:13.727Z] Mar 20, 2024 4:17:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:13.823Z] Mar 20, 2024 4:17:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:14.650Z] Mar 20, 2024 4:17:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:14.727Z] Mar 20, 2024 4:17:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:15.822Z] Mar 20, 2024 4:17:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:17:18.929Z] Mar 20, 2024 4:17:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Mar 20, 2024 4:17:18 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:17:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nMar 20, 2024 4:17:18 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2024-03-20T20:18:27.893Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:18:28.894Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:18:29.534Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:18:29.534Z] Building nodejs source
[debug] [2024-03-20T20:18:29.534Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:18:29.535Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:18:29.536Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8581

[error] (node:18689) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:18:29.915Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:22:08.057Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.062Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.073Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.073Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.084Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.084Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.095Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.096Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.099Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.099Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.100Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.100Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.104Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.104Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.109Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.109Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.112Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.112Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.112Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.112Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.115Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.116Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.119Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.120Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.122Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.122Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.124Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.124Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.128Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.129Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.132Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.133Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.138Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:22:08.139Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:22:09.139Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:22:09.785Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:22:09.785Z] Building nodejs source
[debug] [2024-03-20T20:22:09.785Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:22:09.786Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:22:09.787Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8493

[error] (node:19513) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:22:10.152Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:23:49.617Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:23:50.618Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:23:51.269Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:23:51.270Z] Building nodejs source
[debug] [2024-03-20T20:23:51.270Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:23:51.271Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:23:51.271Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8446

[error] (node:19865) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:23:51.741Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:24:03.320Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:24:04.321Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:24:04.965Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:24:04.965Z] Building nodejs source
[debug] [2024-03-20T20:24:04.965Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:24:04.967Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:24:04.968Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8699

[error] (node:20063) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:24:05.405Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:24:35.021Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:24:36.022Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:24:36.673Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:24:36.673Z] Building nodejs source
[debug] [2024-03-20T20:24:36.673Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:24:36.674Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:24:36.675Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8544

[error] (node:20257) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:24:37.106Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:24:44.207Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:24:44.207Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710966284207","timestamp":"2024-03-20T20:24:44.207Z","eventType":"google.storage.object.delete","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965829824","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:17:09.825Z","updated":"2024-03-20T20:17:09.825Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"6bXI65ct06zSoC3oUcOIW4NdM2E","metadata":{"firebaseStorageDownloadTokens":"188c0d5a-c350-4767-9eb0-ee40ef941c3e"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:17:09.825Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965829824","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965829824&alt=media"}}
[debug] [2024-03-20T20:24:44.213Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:24:44.213Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:24:44.213Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:24:44.214Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"2445c918-fc5a-44f8-af13-0d296a014f73","type":"google.cloud.storage.object.v1.deleted","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","time":"2024-03-20T20:17:09.825Z","data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710965829824","metageneration":"1","contentType":"text/csv","contentDisposition":"inline","timeCreated":"2024-03-20T20:17:09.825Z","updated":"2024-03-20T20:17:09.825Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"6bXI65ct06zSoC3oUcOIW4NdM2E","metadata":{"firebaseStorageDownloadTokens":"188c0d5a-c350-4767-9eb0-ee40ef941c3e"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:17:09.825Z","id":"botco-dynamic-data.appspot.com/example.csv/1710965829824","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710965829824&alt=media"}}
[debug] [2024-03-20T20:24:44.216Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:24:44.216Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:24:45.843Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.843Z] File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/firebaseTypes.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.857Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.857Z] File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/admin.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.870Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.870Z] File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/utils.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.879Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.880Z] File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/endpoints/postData.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.883Z] File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.883Z] File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/types.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.883Z] File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.886Z] File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/states.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.890Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.891Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/1-findIntegration.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.896Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.896Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/2-createContact.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.899Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.899Z] File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/handlebars.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.899Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.899Z] File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/processors/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.903Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.903Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/3-processJSON.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.907Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.908Z] File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/paubox.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.910Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.910Z] File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/syncari.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.912Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.913Z] File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/providers/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.917Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.917Z] File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/listeners/4-sendOutputs.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.921Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.921Z] File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/sms/1-createContactsFromCSV.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.927Z] File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2024-03-20T20:24:45.928Z] File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/lib/index.js changed, reloading triggers"}}
[debug] [2024-03-20T20:24:46.929Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:24:47.610Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:24:47.610Z] Building nodejs source
[debug] [2024-03-20T20:24:47.610Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:24:47.611Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:24:47.612Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8782

[error] (node:20750) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:24:48.304Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:24:52.575Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:24:52.576Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"eventId":"1710966292575","timestamp":"2024-03-20T20:24:52.575Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","type":"storage#object"},"data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710966292575","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:24:52.575Z","updated":"2024-03-20T20:24:52.575Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"AORMzPwEtWZsqa0Zzy3s6uwq7OE","metadata":{"firebaseStorageDownloadTokens":"3837c622-f1aa-4c73-b1cf-f2890b64a280"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:24:52.575Z","id":"botco-dynamic-data.appspot.com/example.csv/1710966292575","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710966292575&alt=media"}}
[debug] [2024-03-20T20:24:52.579Z] [work-queue] {"queuedWork":["us-central1-fileUpload-0-2024-03-20T20:24:52.579Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:24:52.580Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-fileUpload-0-2024-03-20T20:24:52.579Z"],"workRunningCount":1}
[debug] [2024-03-20T20:24:52.581Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:24:52.582Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:24:52.583Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-03-20T20:24:52.583Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast [none]
[debug] [2024-03-20T20:24:52.583Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"specversion":"1.0","id":"56abeb1a-074d-4387-a42e-2006681380af","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","time":"2024-03-20T20:24:52.575Z","data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710966292575","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:24:52.575Z","updated":"2024-03-20T20:24:52.575Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"AORMzPwEtWZsqa0Zzy3s6uwq7OE","metadata":{"firebaseStorageDownloadTokens":"3837c622-f1aa-4c73-b1cf-f2890b64a280"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:24:52.575Z","id":"botco-dynamic-data.appspot.com/example.csv/1710966292575","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710966292575&alt=media"}}
[debug] [2024-03-20T20:24:52.592Z] [work-queue] {"queuedWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:24:52.591Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:24:52.592Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0-2024-03-20T20:24:52.591Z"],"workRunningCount":1}
[debug] [2024-03-20T20:24:52.593Z] Accepted request POST /functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0 --> us-central1-fileUpload-0
[debug] [2024-03-20T20:24:52.597Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-03-20T20:24:52.598Z] [functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/botco-dynamic-data/triggers/us-central1-fileUpload-0, mapping to path=/functions/projects/"}}
[debug] [2024-03-20T20:24:52.598Z] [worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-fileUpload: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:24:52.609Z] [worker-pool] addWorker(us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-fileUpload)"}}
[debug] [2024-03-20T20:24:52.610Z] [worker-pool] Adding worker with key us-central1-fileUpload, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-fileUpload, total=1"}}
[debug] [2024-03-20T20:24:52.613Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast 200
[debug] [2024-03-20T20:24:52.614Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/botco-dynamic-data/trigger_multicast {"status":"multicast_acknowledged"}
[info] >  (node:20809) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:20809) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:20809) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2024-03-20T20:24:53.195Z] [runtime-status] [20809] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:24:53.196Z] [runtime-status] [20809] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:24:53.196Z] [runtime-status] [20809] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-03-20T20:24:53.196Z] [runtime-status] [20809] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:24:53.347Z] [runtime-status] [20809] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-03-20T20:24:53.347Z] [runtime-status] [20809] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-03-20T20:24:53.347Z] [runtime-status] [20809] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:24:53.348Z] [runtime-status] [20809] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-03-20T20:24:53.349Z] [runtime-status] [20809] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.7.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.7.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-03-20T20:24:53.349Z] [runtime-status] [20809] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.5.0","resolution":"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.5.0\",\"resolution\":\"/home/enric/Personal/data-submitter/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2024-03-20T20:24:53.352Z] [runtime-status] [20809] initializeApp(DEFAULT) {"storageBucket":"botco-dynamic-data.appspot.com","projectId":"botco-dynamic-data"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] initializeApp(DEFAULT) {\"storageBucket\":\"botco-dynamic-data.appspot.com\",\"projectId\":\"botco-dynamic-data\"}"}}
[debug] [2024-03-20T20:24:53.480Z] [runtime-status] [20809] Functions runtime initialized. {"cwd":"/home/enric/Personal/data-submitter/functions","node_version":"21.4.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Functions runtime initialized. {\"cwd\":\"/home/enric/Personal/data-submitter/functions\",\"node_version\":\"21.4.0\"}"}}
[debug] [2024-03-20T20:24:53.481Z] [runtime-status] [20809] Listening to port: /tmp/fire_emu_f15fc40d52277639.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] Listening to port: /tmp/fire_emu_f15fc40d52277639.sock"}}
[debug] [2024-03-20T20:24:53.521Z] [worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: IDLE"}}
[debug] [2024-03-20T20:24:53.522Z] [worker-pool] submitRequest(triggerId=us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-fileUpload)"}}
[info] i  functions: Beginning execution of "us-central1-fileUpload" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Beginning execution of \"us-central1-fileUpload\""}}
[debug] [2024-03-20T20:24:53.522Z] [worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: BUSY"}}
[debug] [2024-03-20T20:24:53.531Z] [runtime-status] [20809] RunBackground {"data":{"kind":"storage#object","name":"example.csv","bucket":"botco-dynamic-data.appspot.com","generation":"1710966292575","metageneration":"1","contentType":"text/csv","timeCreated":"2024-03-20T20:24:52.575Z","updated":"2024-03-20T20:24:52.575Z","storageClass":"STANDARD","size":"106","md5Hash":"EO5wA5Wcdke1+yfWioa5sQ==","etag":"AORMzPwEtWZsqa0Zzy3s6uwq7OE","metadata":{"firebaseStorageDownloadTokens":"3837c622-f1aa-4c73-b1cf-f2890b64a280"},"crc32c":"e0VHwg==","timeStorageClassUpdated":"2024-03-20T20:24:52.575Z","id":"botco-dynamic-data.appspot.com/example.csv/1710966292575","selfLink":"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710966292575&alt=media"},"context":{"eventId":"1710966292575","timestamp":"2024-03-20T20:24:52.575Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv","type":"storage#object"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[runtime-status] [20809] RunBackground {\"data\":{\"kind\":\"storage#object\",\"name\":\"example.csv\",\"bucket\":\"botco-dynamic-data.appspot.com\",\"generation\":\"1710966292575\",\"metageneration\":\"1\",\"contentType\":\"text/csv\",\"timeCreated\":\"2024-03-20T20:24:52.575Z\",\"updated\":\"2024-03-20T20:24:52.575Z\",\"storageClass\":\"STANDARD\",\"size\":\"106\",\"md5Hash\":\"EO5wA5Wcdke1+yfWioa5sQ==\",\"etag\":\"AORMzPwEtWZsqa0Zzy3s6uwq7OE\",\"metadata\":{\"firebaseStorageDownloadTokens\":\"3837c622-f1aa-4c73-b1cf-f2890b64a280\"},\"crc32c\":\"e0VHwg==\",\"timeStorageClassUpdated\":\"2024-03-20T20:24:52.575Z\",\"id\":\"botco-dynamic-data.appspot.com/example.csv/1710966292575\",\"selfLink\":\"http://127.0.0.1:9199/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv\",\"mediaLink\":\"http://127.0.0.1:9199/download/storage/v1/b/botco-dynamic-data.appspot.com/o/example.csv?generation=1710966292575&alt=media\"},\"context\":{\"eventId\":\"1710966292575\",\"timestamp\":\"2024-03-20T20:24:52.575Z\",\"eventType\":\"google.storage.object.finalize\",\"resource\":{\"service\":\"storage.googleapis.com\",\"name\":\"projects/_/buckets/botco-dynamic-data.appspot.com/objects/example.csv\",\"type\":\"storage#object\"}}}"}}
[info] >  { name: 'Bob', phone: '555-555-5555' } {"user":"{ name: 'Bob', phone: '555-555-5555' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Bob', phone: '555-555-5555' }"}}
[debug] [2024-03-20T20:24:53.714Z] Mar 20, 2024 4:24:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  { name: 'Alice', phone: '555-555-5556' } {"user":"{ name: 'Alice', phone: '555-555-5556' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Alice', phone: '555-555-5556' }"}}
[info] >  { name: 'Carol', phone: '555-555-5557' } {"user":"{ name: 'Carol', phone: '555-555-5557' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Carol', phone: '555-555-5557' }"}}
[info] >  { name: 'Dave', phone: '555-555-5558' } {"user":"{ name: 'Dave', phone: '555-555-5558' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Dave', phone: '555-555-5558' }"}}
[info] >  { name: 'Elsa', phone: '555-555-5559' } {"user":"{ name: 'Elsa', phone: '555-555-5559' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"\u001b[90m> \u001b[39m { name: 'Elsa', phone: '555-555-5559' }"}}
[debug] [2024-03-20T20:24:53.796Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-fileUpload" in 274.3645ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finished \"us-central1-fileUpload\" in 274.3645ms"}}
[debug] [2024-03-20T20:24:53.797Z] [worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: IDLE"}}
[debug] [2024-03-20T20:24:53.797Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-03-20T20:24:53.797Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-03-20T20:24:53.797Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-03-20T20:24:55.596Z] Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:24:55.632Z] Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:24:55.683Z] Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:24:55.771Z] Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:24:55.790Z] Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:24:56.830Z] Mar 20, 2024 4:24:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:24:56.933Z] Mar 20, 2024 4:24:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:24:57.974Z] Mar 20, 2024 4:24:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:24:58.451Z] Mar 20, 2024 4:24:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:24:58.942Z] Mar 20, 2024 4:24:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:24:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:25:00.252Z] Mar 20, 2024 4:25:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:25:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:25:00.724Z] Mar 20, 2024 4:25:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:25:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:25:34.344Z] Mar 20, 2024 4:25:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:25:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:25:46.218Z] Mar 20, 2024 4:25:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:25:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:26:29.876Z] File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/src/sms/1-createContactsFromCSV.ts changed, reloading triggers"}}
[debug] [2024-03-20T20:26:30.877Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:26:31.591Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.7.0",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:26:31.591Z] Building nodejs source
[debug] [2024-03-20T20:26:31.591Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:26:31.592Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:26:31.593Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8933

[error] (node:21745) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:26:31.995Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2024-03-20T20:26:32.215Z] Mar 20, 2024 4:26:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:26:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] ✔  functions: Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: test, postData, requestReceived, createContact, processJSON, sendOutputs, fileUpload."}}
[debug] [2024-03-20T20:26:37.004Z] [worker-pool] Shutting down IDLE worker (us-central1-fileUpload) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-fileUpload)"}}
[debug] [2024-03-20T20:26:37.004Z] [worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: FINISHING"}}
[debug] [2024-03-20T20:26:37.007Z] [worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: exited"}}
[debug] [2024-03-20T20:26:37.007Z] [worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-fileUpload"},"extension":{},"message":"[worker-us-central1-fileUpload-9462c557-77f2-45bf-b17e-3b6911960e90]: FINISHED"}}
[debug] [2024-03-20T20:26:50.277Z] Mar 20, 2024 4:26:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:26:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2024-03-20T20:26:50.285Z] Mar 20, 2024 4:26:50 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Mar 20, 2024 4:26:50 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2024-03-20T20:27:17.096Z] File /home/enric/Personal/data-submitter/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/package.json changed, reloading triggers"}}
[debug] [2024-03-20T20:27:17.096Z] File /home/enric/Personal/data-submitter/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/enric/Personal/data-submitter/functions/package-lock.json changed, reloading triggers"}}
[debug] [2024-03-20T20:27:18.096Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2024-03-20T20:27:18.747Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "axios": "^1.6.7",
    "csvtojson": "^2.0.10",
    "dotenv": "^16.4.5",
    "firebase-admin": "^11.5.0",
    "firebase-functions": "^4.8.1",
    "handlebars": "^4.7.7",
    "paubox-node": "^1.2.5"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.0.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-03-20T20:27:18.747Z] Building nodejs source
[debug] [2024-03-20T20:27:18.747Z] Failed to find version of module node: reached end of search path /home/enric/Personal/data-submitter/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "18" doesn't match your global version "21". Using node@21 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2024-03-20T20:27:18.748Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-03-20T20:27:18.748Z] Found firebase-functions binary at '/home/enric/Personal/data-submitter/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8573

[error] (node:22782) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-03-20T20:27:19.155Z] Got response from /__/functions.yaml {"endpoints":{"test":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"test"},"postData":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"postData"},"requestReceived":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"requestReceived"},"createContact":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/requests/{requestID}"},"retry":false},"labels":{},"entryPoint":"createContact"},"processJSON":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"processJSON"},"sendOutputs":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/botco-dynamic-data/databases/(default)/documents/orgs/{orgID}/records/{instanceID}/outputs/{outputID}"},"retry":false},"labels":{},"entryPoint":"sendOutputs"},"fileUpload":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"google.storage.object.finalize","eventFilters":{"resource":"projects/_/buckets/botco-dynamic-data.appspot.com"},"retry":false},"labels":{},"entryPoint":"fileUpload"}},"specVersion":"v1alpha1","requiredAPIs":[]}
